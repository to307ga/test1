# セッションマネージャー経由でEC2へファイル転送する手順

ローカルPCからS3経由でへファイルを転送する方法を記載します。

## 前提条件

- AWS CLIがインストール済み
- 必要なIAM権限（`AmazonSSMManagedInstanceCore` など）が付与されている
- EC2インスタンスにSSMエージェントがインストール・起動済み
- EC2インスタンスのIAMロールにS3アクセス権限が付与されている

## 手順

1. S3バケットにファイルをアップロード
2. AWSマネジメントコンソールにログイン
3. S3 サービス画面へ移動
      - サービス検索で「S3」を選択します。
4. 保存先のバケット（フォルダ）に移動する。
5. ローカルからファイルをドラッグする
6. 「アップロード」をクリックする
7. 上にファイルがアップロードされたことを確認します。
8. 対象のオブジェクトをチェック＞「S3 URIをコピー」をクリックして、URIを控える。
9. EC2インスタンスでS3からファイルをダウンロードするコマンドを送信
10. 対象のEC2にログインする。
    - [EC2_Linuxログイン手順.md](EC2_Linuxログイン手順.md)
    - [EC2_Windowsログイン手順.md](EC2_Windowsログイン手順.md)
11. 以下のコマンドを実行する。
    aws s3 cp [1.7で取得したS3 URI] [サーバ上の転送先パス]
    例）aws s3 cp s3://poc-idhub-s3-work/live-tail-results.csv /home/   ssm-user/
12. ファイルが転送されたことを確認する
