

## ä¾å­˜é–¢ä¿‚ã®å¯è¦–åŒ–

```
ä¾å­˜é–¢ä¿‚ãƒ„ãƒªãƒ¼:
â”œâ”€â”€ 1. fixed-natgw-eip.yaml (ä¾å­˜é–¢ä¿‚ãªã—)
â”œâ”€â”€ 4. iam-group.yaml (ä¾å­˜é–¢ä¿‚ãªã—)
â”‚
â”œâ”€â”€ 2. vpc.yaml
â”‚   â””â”€â”€ depends on: fixed-natgw-eip.yaml
â”‚
â”œâ”€â”€ 3. securitygroup.yaml  
â”‚   â””â”€â”€ depends on: vpc.yaml
â”‚
â””â”€â”€ 5. ec2.yaml
    â”œâ”€â”€ depends on: vpc.yaml
    â””â”€â”€ depends on: securitygroup.yaml
```


## ğŸ“¦ æ­£ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤é †åº:

1ï¸âƒ£ fixed-natgw-eip.yaml      (ä¾å­˜é–¢ä¿‚ãªã—)
1ï¸âƒ£ iam-group.yaml            (ä¾å­˜é–¢ä¿‚ãªã—) â€»ä¸¦è¡Œå¯èƒ½
     â†“
2ï¸âƒ£ vpc.yaml                  (fixed-natgw-eip ã«ä¾å­˜)
     â†“
3ï¸âƒ£ securitygroup.yaml        (vpc ã«ä¾å­˜)
     â†“
4ï¸âƒ£ ec2.yaml                  (vpc, securitygroup ã«ä¾å­˜)


## ã‚«ã‚¹ã‚¿ãƒ Jenkinsã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ç”¨

ğŸ¯ Jenkins ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¤‰æ›´: JenkinsVersion â†’ JenkinsImageUri
ã‚¤ãƒ¡ãƒ¼ã‚¸æŒ‡å®š: !Sub 'jenkins/jenkins:${JenkinsVersion}-lts' â†’ !Ref JenkinsImageUri
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤: jenkins/jenkins:2.427-lts (Docker Hubå…¬å¼ã‚¤ãƒ¡ãƒ¼ã‚¸)
ğŸ¯ Gitea ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¤‰æ›´: GiteaVersion â†’ GiteaImageUri
ã‚¤ãƒ¡ãƒ¼ã‚¸æŒ‡å®š: !Sub 'gitea/gitea:${GiteaVersion}' â†’ !Ref GiteaImageUri
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤: gitea/gitea:1.21.1 (Docker Hubå…¬å¼ã‚¤ãƒ¡ãƒ¼ã‚¸)
ğŸš€ ä½¿ç”¨æ–¹æ³•
1. Docker Hubå…¬å¼ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰

```
# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æŒ‡å®šãªã— â†’ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒä½¿ç”¨ã•ã‚Œã‚‹
# Jenkins: jenkins/jenkins:2.427-lts
# Gitea: gitea/gitea:1.21.1
```

2. ã‚«ã‚¹ã‚¿ãƒ ECRã‚¤ãƒ¡ãƒ¼ã‚¸

```
# config/poc/ecs-jenkins.yaml
parameters:
  JenkinsImageUri: '123456789012.dkr.ecr.ap-northeast-1.amazonaws.com/poc-jenkins:latest'

# config/poc/ecs-gitea.yaml  
parameters:
  GiteaImageUri: '123456789012.dkr.ecr.ap-northeast-1.amazonaws.com/poc-gitea:latest'
```

3. ä»–ã®ãƒ¬ã‚¸ã‚¹ãƒˆãƒª

# GitHub Container Registry
JenkinsImageUri: 'ghcr.io/your-org/custom-jenkins:v1.0'

# ãã®ä»–ã®ãƒ¬ã‚¸ã‚¹ãƒˆãƒª

```
GiteaImageUri: 'your-registry.com/gitea:custom'
``` 

## âœ… **ãƒ¡ãƒªãƒƒãƒˆ**
- ğŸ”§ **ã‚«ã‚¹ã‚¿ãƒ Jenkinsã‚¤ãƒ¡ãƒ¼ã‚¸** ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚„ãƒ„ãƒ¼ãƒ«ã‚’äº‹å‰è¨­å®šå¯èƒ½
- ğŸ—ï¸ **ECRé€£æº** ã§ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¤ãƒ¡ãƒ¼ã‚¸ç®¡ç†
- ğŸ”„ **å¾Œæ–¹äº’æ›æ€§** ã‚’ä¿æŒï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯å…¬å¼ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰
- ğŸ¯ **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ç°¡å˜åˆ‡ã‚Šæ›¿ãˆ** å¯èƒ½







