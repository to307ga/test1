[defaults]
# インベントリファイルのデフォルトパス
inventory = inventories/poc/aws_ec2.yml

# ロールの検索パス
roles_path = roles

# ホストキーチェックを無効化（初回接続時のプロンプト回避）
host_key_checking = False

# SSH接続のタイムアウト
timeout = 30

# 並列実行数
forks = 5

# ログファイル
log_path = ./ansible.log

# Deprecation警告を無効化
deprecation_warnings = False

# Vaultパスワードファイル（AWS Secrets Manager経由）
vault_password_file = /usr/local/bin/vault-password-aws.sh

# コールバックプラグイン（ansible.posixが無いので無効化）
# callbacks_enabled = timer, profile_tasks

# SSMプラグイン設定
[inventory]
enable_plugins = aws_ec2, yaml, ini

[ssh_connection]
# SSM経由のSSH接続設定
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no

# パイプライン化を有効化（パフォーマンス向上）
pipelining = True
