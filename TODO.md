# AWS SES BYODKIM プロジェクト TODOリスト

## 🔧 リファクタリング・改善項目

### 1. カスタムリソース機能の整理（優先度：中）
**問題：** `dkim-manager-lambda.yaml`に未使用のカスタムリソース機能が実装されている
- [ ] `handle_custom_resource()` 関数の削除
- [ ] `ResponseURL` 処理コードの削除  
- [ ] CloudFormationレスポンス処理の削除
- [ ] Lambda関数コードの簡素化

**理由：** 
- 現在のテンプレートではカスタムリソースとして使用されていない
- 不要なコードが残っているとメンテナンス性が低下
- EventBridge経由の呼び出しで十分機能している

**影響範囲：**
- `sceptre/templates/dkim-manager-lambda.yaml`
- Lambda関数のコード部分のみ（インフラ構成に影響なし）

### 2. その他の改善項目

#### 2.1 テンプレート最適化
- [ ] 未使用パラメータの削除
- [ ] Output名の統一
- [ ] タグ付け戦略の見直し

#### 2.2 スクリプト改善
- [ ] エラーハンドリングの強化
- [ ] ログ出力の標準化
- [ ] 設定ファイルでの共通パラメータ管理

#### 2.3 ドキュメント整備
- [ ] API仕様書の作成
- [ ] 運用手順書の詳細化
- [ ] トラブルシューティングガイドの充実

## 🚀 機能追加項目

### 3.1 監視・アラート強化
- [ ] 詳細なCloudWatchメトリクス追加
- [ ] SLI/SLO定義と監視
- [ ] 自動復旧機能の実装

### 3.2 セキュリティ強化
- [ ] IAM権限の最小化
- [ ] VPC Endpointの活用
- [ ] ログの暗号化強化

## 📝 完了済み項目

### ✅ Phase 1-8 BYODKIM実装（2025/09/08）
- [x] 8フェーズデプロイシステム構築
- [x] Layer作成自動化スクリプト
- [x] EasyDKIM無効化スクリプト
- [x] 依存関係解決とProjectCode統一
- [x] S3セキュリティ設定標準化
- [x] 開発環境SES設定（Production EmailIdentity共有）
- [x] 完全デプロイ手順書作成

### ✅ テンプレート整理（2025/09/08）
- [x] 未使用BYODKIM実験テンプレート削除（10ファイル）
- [x] ses.yamlファイル安全削除
- [x] 依存関係の修正と検証

## 📋 メンテナンス項目

### 定期的な確認事項
- [ ] AWS CLI認証情報の更新
- [ ] 証明書有効期限の監視
- [ ] S3バケットポリシーの見直し
- [ ] Lambda関数ランタイムの更新

---

## 優先度定義
- **高**：本番運用に直接影響する項目
- **中**：保守性・可読性に影響する項目  
- **低**：将来的な改善項目

## 更新履歴
- 2025/09/08: 初回作成、カスタムリソースリファクタリング項目追加
