
# リモートブランチをすべてローカルに取得する方法

1.リモートの情報を最新に更新します。

git fetch --all

2.すべてのリモートブランチをローカルに追跡ブランチとして作成します

for branch in $(git branch -r | grep -v '\->' | grep -v 'HEAD' | sed 's/origin\///'); do git branch --track "$branch" "origin/$branch"; done

3.ローカルにすべてのブランチが作成されたことを確認します。

git branch -a

この手順で、リモートに存在するすべてのブランチをローカルに持ってくることができます。

### もう少し詳細な手順

1. リモートブランチの取得（fetch）
git fetch --all
このコマンドで、リモートリポジトリの最新情報（ブランチ一覧やコミット履歴）がローカルに取得されます。
ただし、この時点では「リモート追跡ブランチ（remotes/origin/xxx）」が更新されるだけで、ローカルブランチは作成されません。

2. ローカルブランチの作成（checkout/branch）
リモートブランチをローカルブランチとして作成するには、例えば以下のコマンドを使います。
git checkout -b stg origin/stg
このコマンドで、origin/stg というリモートブランチを元に、ローカルに stg というブランチが作成されます。

3. pull について
git checkout -b stg origin/stg で作成した直後は、リモートの内容がそのままローカルブランチに反映されています。
その後、git pull を実行すると、リモートブランチの最新コミットがローカルブランチに反映（マージ）されます。
git checkout -b stg origin/stg を実行した時点で、

ローカルに stg ブランチが新しく作成されます。
その内容は、実行時点の origin/stg（リモートブランチ）の最新コミットが反映されています。
リモート側で新しい変更がなければ、追加で git pull する必要はありません。
リモートに新しいコミットが追加された場合のみ、git pull でローカルに反映します


すべてのリモートブランチをローカルに作成する方法
一括でローカルブランチを作成するには、以下のコマンドを使います。
for branch in $(git branch -r | grep -v '\->' | grep -v 'HEAD' | sed 's/origin\///'); do git branch --track "$branch" "origin/$branch"; done

このコマンドで、すべてのリモートブランチがローカルに「追跡ブランチ」として作成されます。

まとめ
fetch：リモートの情報をローカルに取得（ローカルブランチは作成されない）
checkout/branch：リモートブランチを元にローカルブランチを作成
pull：ローカルブランチにリモートの最新コミットを反映

### リモートブランチからの一括ローカルブランチ作成コマンド解説

リモートブランチからの一括ローカルブランチ作成
for branch in $(git branch -r | grep -v '\->' | grep -v 'HEAD' | sed 's/origin\///'); do git branch --track "$branch" "origin/$branch"; done
1. git branch -r
リモート追跡ブランチ（例: origin/stg, origin/main など）の一覧を表示します。

2. grep -v '\->' | grep -v 'HEAD'
リモートのHEADや参照（→で示されるもの）を除外します。

3. sed 's/origin\///'
origin/ の部分を削除し、ブランチ名だけにします。

4. git branch --track "$branch" "origin/$branch"
ローカルに「$branch」という名前のブランチを、リモートの「origin/$branch」を元に作成します。

どの時点でローカルブランチが作成されるか
このコマンドを実行すると、

ローカルに「リモート追跡ブランチ」と同じ名前のブランチが一括で作成されます。
作成されたローカルブランチは、実行時点の「origin/xxx」ブランチの最新コミットを元にしています。
pullやcheckoutとの違い
git branch --track は、リモートブランチの最新コミットを元にローカルブランチを「作成」するだけです。
作成直後のローカルブランチは、リモートブランチと同じ内容（最新コミット）を持っています。
その後、ローカルブランチに切り替えて作業したい場合は git checkout ブランチ名 を使います。
pullは、リモートに新しいコミットが追加された場合に、ローカルブランチにその変更を反映するために使います。
まとめ
このコマンドで「pull」や「checkout」しなくても、ローカルブランチがリモートの最新コミットを元に作成されます。
そのため、実行時点でリモートとローカルの内容は一致しています。
以降、リモートに変更があれば「pull」で同期します。

















