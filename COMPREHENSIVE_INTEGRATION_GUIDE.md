# ğŸš€ Sample BYODKIMå®Ÿè£…çµ±åˆã‚¬ã‚¤ãƒ‰

## ğŸ“‹ æ¦‚è¦

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€æ¤œè¨¼æ¸ˆã¿ã®ã‚µãƒ³ãƒ—ãƒ«BYODKIMå®Ÿè£…ã‚’ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«çµ±åˆã—ã€ä¿¡é ¼æ€§ã®é«˜ã„DKIMè¨¼æ˜æ›¸è‡ªå‹•åŒ–ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ¯ çµ±åˆã«ã‚ˆã‚‹ãƒ¡ãƒªãƒƒãƒˆ

### âœ… æŠ€è¡“çš„ãƒ¡ãƒªãƒƒãƒˆ
- **å®Ÿç¸¾ã®ã‚ã‚‹BYODKIMå®Ÿè£…**ï¼ˆå®Ÿéš›ã«ãƒ†ã‚¹ãƒˆæ¸ˆã¿ï¼‰
- **æ®µéšçš„ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ**ï¼ˆPhase 1-8ã®ãƒªã‚¹ã‚¯åˆ†æ•£ï¼‰
- **å®Œå…¨è‡ªå‹•åŒ–**ï¼ˆEventBridgeé€£æºã«ã‚ˆã‚‹è‡ªå‹•Phaseå®Ÿè¡Œï¼‰
- **DNSç®¡ç†ãƒ—ãƒ­ã‚»ã‚¹å¯¾å¿œ**ï¼ˆ2é€±é–“ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ å¯¾å¿œï¼‰

### âœ… é‹ç”¨ãƒ¡ãƒªãƒƒãƒˆ
- **åŒ…æ‹¬çš„ç›£è¦–**ï¼ˆCloudWatch + SNS ã‚¢ãƒ©ãƒ¼ãƒˆï¼‰
- **è‡ªå‹•è¨¼æ˜æ›¸æ›´æ–°**ï¼ˆå¹´æ¬¡ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- **è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**ï¼ˆè¨­è¨ˆæ›¸ãƒ»é‹ç”¨æ‰‹é †æ›¸å®Œå‚™ï¼‰
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**ï¼ˆè‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ãƒ»å¾©æ—§æ©Ÿæ§‹ï¼‰

### âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¡ãƒªãƒƒãƒˆ
- **KMSæš—å·åŒ–**ï¼ˆDKIMç§˜å¯†éµãƒ»è¨­å®šæƒ…å ±ï¼‰
- **IAMæœ€å°æ¨©é™**ï¼ˆå½¹å‰²ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼‰
- **ç›£æŸ»å¯¾å¿œ**ï¼ˆåŒ…æ‹¬çš„ãƒ­ã‚°è¨˜éŒ²ãƒ»è¿½è·¡ï¼‰

## ğŸ“Š çµ±åˆå‰ã®ç¾çŠ¶ç¢ºèª

### ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ³
- âœ… Easy DKIM vs BYODKIMåˆ†æå®Œäº†
- âœ… AWSç’°å¢ƒã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†
- âœ… ã‚µãƒ³ãƒ—ãƒ«å®Ÿè£…ç™ºè¦‹ãƒ»åˆ†æå®Œäº†
- âœ… å†…éƒ¨DNSç®¡ç†ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèªæ¸ˆã¿ï¼ˆ2é€±é–“ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ ï¼‰

### ã‚µãƒ³ãƒ—ãƒ«å®Ÿè£…ã®ç‰¹å¾´
- âœ… **8æ®µéšãƒ•ã‚§ãƒ¼ã‚ºå‹ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ**
- âœ… **BYODKIM TXTãƒ¬ã‚³ãƒ¼ãƒ‰**ï¼ˆCNAMEã§ã¯ãªã„ï¼‰
- âœ… **ã‚«ã‚¹ã‚¿ãƒ ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼**ï¼ˆgooid-21-pro-20250907-1/2/3ï¼‰
- âœ… **EventBridgeè‡ªå‹•é€£æº**ï¼ˆPhase 5â†’7ï¼‰
- âœ… **Pythonæ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**ï¼ˆsecrets + base64ï¼‰
- âœ… **åŒ…æ‹¬çš„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**

## ğŸ”§ çµ±åˆæ‰‹é †

### Step 1: æº–å‚™ä½œæ¥­

#### 1.1 å‰ææ¡ä»¶ç¢ºèª
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å®Ÿè¡Œ
cd /path/to/AWS_SES_BYODKIM

# å¿…è¦ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå­˜åœ¨ç¢ºèª
ls -la sample/  # ã‚µãƒ³ãƒ—ãƒ«å®Ÿè£…ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
ls -la sceptre/ # ç¾åœ¨ã®sceptreãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

# Pythonç’°å¢ƒç¢ºèª
uv --version
uv run sceptre --version

# AWSèªè¨¼ç¢ºèª
aws sts get-caller-identity
```

#### 1.2 ç¾åœ¨ã®è¨­å®šãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
```bash
# è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆçµ±åˆã‚¹ã‚¯ãƒªãƒ—ãƒˆå†…ã§å®Ÿè¡Œï¼‰
# æ‰‹å‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®å ´åˆï¼š
cp -r sceptre/ sceptre_backup_$(date +%Y%m%d_%H%M%S)/
```

### Step 2: çµ±åˆå®Ÿè¡Œ

#### 2.1 è‡ªå‹•çµ±åˆã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
```bash
# å®Ÿè¡Œæ¨©é™ä»˜ä¸
chmod +x scripts/integrate_sample_implementation.sh

# çµ±åˆå®Ÿè¡Œ
./scripts/integrate_sample_implementation.sh
```

#### 2.2 çµ±åˆå†…å®¹ç¢ºèª
```bash
# çµ±åˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
ls -la sceptre/templates/          # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
ls -la sceptre/config/prod/        # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
ls -la docs/implementation/        # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

# çµ±åˆã‚µãƒãƒªãƒ¼ç¢ºèª
cat INTEGRATION_SUMMARY_*.md
```

### Step 3: çµ±åˆæ¤œè¨¼

#### 3.1 æ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
```bash
# å®Ÿè¡Œæ¨©é™ä»˜ä¸
chmod +x scripts/validate_integration.sh

# æ¤œè¨¼å®Ÿè¡Œ
./scripts/validate_integration.sh
```

#### 3.2 æ¤œè¨¼çµæœç¢ºèª
```bash
# æ¤œè¨¼ãƒ¬ãƒãƒ¼ãƒˆç¢ºèª
cat INTEGRATION_VALIDATION_*.md

# é‡è¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç¢ºèª
grep -r "goo.ne.jp" sceptre/config/prod/
grep -r "tomonaga@mx2.mesh.ne.jp" sceptre/config/prod/
```

### Step 4: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæº–å‚™

#### 4.1 Sceptreè¨­å®šæ¤œè¨¼
```bash
# Phase 1è¨­å®šæ¤œè¨¼
uv run sceptre validate prod/phase-1-infrastructure-foundation

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ç¢ºèª
uv run sceptre list stacks --config-dir sceptre/config/prod
```

#### 4.2 DNSç®¡ç†ãƒãƒ¼ãƒ äº‹å‰é€£çµ¡
**ğŸ“§ é€£çµ¡å†…å®¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ:**
```
ä»¶å: BYODKIM TXTãƒ¬ã‚³ãƒ¼ãƒ‰è¨­å®šä¾é ¼ï¼ˆAWS SESç§»è¡Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰

tomonagaæ§˜

AWS SESç§»è¡Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã„ã¦ã€BYODKIMã®å®Ÿè£…ã‚’é€²ã‚ã¦ãŠã‚Šã€
ä»¥ä¸‹ã®TXTãƒ¬ã‚³ãƒ¼ãƒ‰è¨­å®šã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚

â–  è¨­å®šäºˆå®šæ™‚æœŸ: [ç´„2é€±é–“å¾Œ]
â–  ãƒ‰ãƒ¡ã‚¤ãƒ³: goo.ne.jp
â–  ãƒ¬ã‚³ãƒ¼ãƒ‰å½¢å¼: TXTãƒ¬ã‚³ãƒ¼ãƒ‰ï¼ˆCNAMEã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰
â–  ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼æ•°: 3ã¤ï¼ˆgooid-21-pro-20250907-1/2/3ï¼‰

è©³ç´°ãªè¨­å®šå†…å®¹ã¯ã€Phase 5å®Ÿè¡Œæ™‚ã«ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰è‡ªå‹•é€ä¿¡ã•ã‚Œã¾ã™ã€‚
äº‹å‰ã«ã”ç¢ºèªã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚

ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚
```

## ğŸ“… æ®µéšçš„ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¨ˆç”»

### Week 1: åŸºç›¤æ§‹ç¯‰ï¼ˆPhase 1-3ï¼‰

#### Phase 1: ã‚¤ãƒ³ãƒ•ãƒ©åŸºç›¤æ§‹ç¯‰
```bash
# ã‚¤ãƒ³ãƒ•ãƒ©åŸºç›¤ãƒ‡ãƒ—ãƒ­ã‚¤
uv run sceptre launch prod/phase-1-infrastructure-foundation

# å®Ÿè¡Œçµæœç¢ºèª
uv run sceptre describe prod/phase-1-infrastructure-foundation
uv run sceptre get outputs prod/phase-1-infrastructure-foundation
```

**æœŸå¾…ã•ã‚Œã‚‹æˆæœç‰©:**
- âœ… IAMãƒ­ãƒ¼ãƒ«ãƒ»ãƒãƒªã‚·ãƒ¼ä½œæˆ
- âœ… KMSæš—å·åŒ–ã‚­ãƒ¼ä½œæˆ
- âœ… Secrets Managerè¨­å®š
- âœ… S3ãƒã‚±ãƒƒãƒˆä½œæˆï¼ˆè¨¼æ˜æ›¸ãƒ»ãƒ­ã‚°ãƒ»Lambda Layerç”¨ï¼‰
- âœ… CloudWatch Logsè¨­å®š

#### Phase 2: DKIMç®¡ç†ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰
```bash
# DKIMç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ãƒ—ãƒ­ã‚¤
uv run sceptre launch prod/phase-2-dkim-system

# Lambdaé–¢æ•°å‹•ä½œç¢ºèª
aws lambda invoke \
    --function-name aws-byodmim-prod-dkim-manager \
    --payload '{"action": "status_check"}' \
    --output text \
    response.json

cat response.json
```

**æœŸå¾…ã•ã‚Œã‚‹æˆæœç‰©:**
- âœ… DKIM Manager Lambdaé–¢æ•°
- âœ… cryptography Lambda Layer
- âœ… EventBridge Rulesè¨­å®š
- âœ… è‡ªå‹•åŒ–æ©Ÿèƒ½æœ‰åŠ¹åŒ–

#### Phase 3: SESè¨­å®šãƒ»BYODKIMåˆæœŸåŒ–
```bash
# SESãƒ»BYODKIMåˆæœŸåŒ–
uv run sceptre launch prod/phase-3-ses-byodkim

# SES Email Identityç¢ºèª
aws sesv2 get-email-identity --email-identity goo.ne.jp
```

**æœŸå¾…ã•ã‚Œã‚‹æˆæœç‰©:**
- âœ… SES Email Identityä½œæˆï¼ˆgoo.ne.jpï¼‰
- âœ… BYODKIMè¨­å®šåˆæœŸåŒ–ï¼ˆSigningEnabled: falseï¼‰
- âœ… Configuration Setè¨­å®š

### Week 2: DNSé€£æºæº–å‚™ï¼ˆPhase 4-5ï¼‰

#### Phase 4: DNSè¨­å®šæº–å‚™
```bash
# DNSè¨­å®šæº–å‚™ï¼ˆè‡ªå‹•å®Ÿè¡Œã¾ãŸã¯EventBridgeçµŒç”±ï¼‰
uv run sceptre launch prod/phase-4-dns-preparation

# ç”Ÿæˆã•ã‚ŒãŸTXTãƒ¬ã‚³ãƒ¼ãƒ‰ç¢ºèª
aws s3 ls s3://aws-byodmim-prod-dkim-certificates/dns-records/
```

**æœŸå¾…ã•ã‚Œã‚‹æˆæœç‰©:**
- âœ… BYODKIM RSAã‚­ãƒ¼ãƒšã‚¢ç”Ÿæˆï¼ˆ2048ãƒ“ãƒƒãƒˆï¼‰
- âœ… DNS TXTãƒ¬ã‚³ãƒ¼ãƒ‰ç”Ÿæˆï¼ˆk=rsa; p=...å½¢å¼ï¼‰
- âœ… ç§˜å¯†éµKMSæš—å·åŒ–ãƒ»Secrets Managerä¿å­˜
- âœ… å…¬é–‹éµãƒ»DNSè¨­å®šæƒ…å ±S3ä¿å­˜

#### Phase 5: DNSç®¡ç†ãƒãƒ¼ãƒ é€£æº
```bash
# DNSç®¡ç†ãƒãƒ¼ãƒ é€£æºï¼ˆè‡ªå‹•å®Ÿè¡Œã¾ãŸã¯EventBridgeçµŒç”±ï¼‰
uv run sceptre launch prod/phase-5-dns-team-collaboration

# é€šçŸ¥é€ä¿¡ç¢ºèª
aws sns list-subscriptions-by-topic \
    --topic-arn arn:aws:sns:ap-northeast-1:ACCOUNT:aws-byodmim-prod-dns-alerts
```

**æœŸå¾…ã•ã‚Œã‚‹æˆæœç‰©:**
- âœ… DNSç®¡ç†ãƒãƒ¼ãƒ è‡ªå‹•é€šçŸ¥ï¼ˆãƒ¡ãƒ¼ãƒ« + Slackï¼‰
- âœ… TXTãƒ¬ã‚³ãƒ¼ãƒ‰è¨­å®šæ‰‹é †æ›¸é€ä¿¡
- âœ… Phase 7è‡ªå‹•å®Ÿè¡Œãƒˆãƒªã‚¬ãƒ¼è¨­å®š
- âœ… EventBridgeé€£æºæœ‰åŠ¹åŒ–

### Week 3-4: DNSè¨­å®šå®Œäº†å¾…æ©Ÿï¼ˆPhase 6ï¼‰

**Phase 6ã¯å‰Šé™¤æ¸ˆã¿**ï¼ˆå¤–éƒ¨DNSä½œæ¥­å¾…æ©Ÿã®ãŸã‚ï¼‰

#### å¾…æ©ŸæœŸé–“ã®ä½œæ¥­
- âœ… DNSç®¡ç†ãƒãƒ¼ãƒ ã«ã‚ˆã‚‹TXTãƒ¬ã‚³ãƒ¼ãƒ‰è¨­å®š
- âœ… DNSä¼æ’­çŠ¶æ³ã®ç›£è¦–
- âœ… Phase 7è‡ªå‹•å®Ÿè¡Œã®å¾…æ©Ÿ

### Week 5: æœ‰åŠ¹åŒ–ãƒ»ç›£è¦–é–‹å§‹ï¼ˆPhase 7-8ï¼‰

#### Phase 7: DNSæ¤œè¨¼ãƒ»DKIMæœ‰åŠ¹åŒ–ï¼ˆè‡ªå‹•å®Ÿè¡Œï¼‰
```bash
# EventBridgeã«ã‚ˆã‚‹è‡ªå‹•å®Ÿè¡Œï¼ˆPhase 5å®Œäº†ç´„2é€±é–“å¾Œï¼‰
# æ‰‹å‹•ç¢ºèªã®å ´åˆï¼š
uv run sceptre describe prod/phase-7-dns-validation-dkim-activation

# DKIMæœ‰åŠ¹åŒ–ç¢ºèª
aws sesv2 get-email-identity --email-identity goo.ne.jp | jq '.DkimAttributes'
```

**æœŸå¾…ã•ã‚Œã‚‹æˆæœç‰©:**
- âœ… DNSä¼æ’­ç¢ºèªï¼ˆdig ã‚³ãƒãƒ³ãƒ‰ä½¿ç”¨ï¼‰
- âœ… BYODKIMæœ‰åŠ¹åŒ–ï¼ˆSigningEnabled: trueï¼‰
- âœ… æˆåŠŸãƒ­ã‚°è¨˜éŒ²
- âœ… è¨­å®šå®Œäº†çŠ¶æ…‹ä¿å­˜

#### Phase 8: ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ é–‹å§‹
```bash
# ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ é–‹å§‹
uv run sceptre launch prod/phase-8-monitoring-system

# ç›£è¦–ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç¢ºèª
aws events describe-rule --name aws-byodmim-prod-dkim-monitor
```

**æœŸå¾…ã•ã‚Œã‚‹æˆæœç‰©:**
- âœ… å®šæœŸç›£è¦–ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®šï¼ˆæ¯æœˆ1æ—¥ 9:00 JSTï¼‰
- âœ… æœŸé™åˆ‡ã‚Œã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šï¼ˆ1ãƒ¶æœˆå‰ï¼‰
- âœ… è‡ªå‹•æ›´æ–°ãƒ—ãƒ­ã‚»ã‚¹è¨­å®š
- âœ… CloudWatch ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

## ğŸ” çµ±åˆå¾Œã®ç¢ºèªé …ç›®

### âœ… æŠ€è¡“çš„ç¢ºèª
```bash
# DKIMç½²åçŠ¶æ…‹ç¢ºèª
aws sesv2 get-email-identity \
    --email-identity goo.ne.jp \
    --query 'DkimAttributes.SigningEnabled'

# DNS TXTãƒ¬ã‚³ãƒ¼ãƒ‰ç¢ºèª
dig gooid-21-pro-20250907-1._domainkey.goo.ne.jp TXT

# Lambdaé–¢æ•°å‹•ä½œç¢ºèª
aws lambda invoke \
    --function-name aws-byodmim-prod-dkim-manager \
    --payload '{"action": "monitor_certificate"}' \
    --output text \
    response.json
```

### âœ… ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆç¢ºèª
```bash
# CloudWatch ã‚¢ãƒ©ãƒ¼ãƒ çŠ¶æ…‹ç¢ºèª
aws cloudwatch describe-alarms \
    --alarm-name-prefix "aws-byodmim-prod"

# SNS ãƒˆãƒ”ãƒƒã‚¯ç¢ºèª
aws sns list-topics | grep aws-byodmim-prod

# EventBridge ãƒ«ãƒ¼ãƒ«ç¢ºèª
aws events list-rules | grep aws-byodmim-prod
```

### âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºèª
```bash
# KMS ã‚­ãƒ¼ç¢ºèª
aws kms list-keys | grep -A 5 -B 5 aws-byodmim

# Secrets Managerç¢ºèª
aws secretsmanager list-secrets | grep aws-byodmim

# IAM ãƒ­ãƒ¼ãƒ«ç¢ºèª
aws iam list-roles | grep aws-byodmim
```

## ğŸ“Š é‹ç”¨é–‹å§‹å¾Œã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

### æœˆæ¬¡ä½œæ¥­
- âœ… DKIMè¨¼æ˜æ›¸æœŸé™ãƒã‚§ãƒƒã‚¯ï¼ˆè‡ªå‹•å®Ÿè¡Œ - æ¯æœˆ1æ—¥ 9:00ï¼‰
- âœ… ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç¢ºèª
- âœ… ãƒ­ã‚°åˆ†æãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹ç¢ºèª

### å¹´æ¬¡ä½œæ¥­
- âœ… DKIMè¨¼æ˜æ›¸æ›´æ–°ï¼ˆè‡ªå‹•å®Ÿè¡Œ - æœŸé™1ãƒ¶æœˆå‰ï¼‰
- âœ… DNSæ›´æ–°ä¾é ¼ï¼ˆè‡ªå‹•é€šçŸ¥ï¼‰
- âœ… ã‚·ã‚¹ãƒ†ãƒ æ€§èƒ½æœ€é©åŒ–

### ç·Šæ€¥æ™‚å¯¾å¿œ
```bash
# ç·Šæ€¥æ™‚DKIMç„¡åŠ¹åŒ–
aws sesv2 put-email-identity-dkim-signing-attributes \
    --email-identity goo.ne.jp \
    --signing-enabled=false

# ç·Šæ€¥æ™‚è¨¼æ˜æ›¸å¼·åˆ¶æ›´æ–°
aws lambda invoke \
    --function-name aws-byodmim-prod-dkim-manager \
    --payload '{"action": "force_renewal"}' \
    --output text \
    emergency_response.json
```

## ğŸ†˜ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨å¯¾ç­–

#### 1. Phaseé–“ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼
```bash
# ä¾å­˜é–¢ä¿‚ç¢ºèª
uv run sceptre get outputs prod/phase-1-infrastructure-foundation

# ã‚¹ã‚¿ãƒƒã‚¯çŠ¶æ…‹ç¢ºèª
uv run sceptre describe prod/phase-1-infrastructure-foundation
```

#### 2. DNSä¼æ’­é…å»¶
```bash
# è¤‡æ•°DNSã‚µãƒ¼ãƒãƒ¼ã§ç¢ºèª
dig @8.8.8.8 gooid-21-pro-20250907-1._domainkey.goo.ne.jp TXT
dig @1.1.1.1 gooid-21-pro-20250907-1._domainkey.goo.ne.jp TXT

# DNSç®¡ç†ãƒãƒ¼ãƒ å†ç¢ºèª
# â†’ tomonaga@mx2.mesh.ne.jp
```

#### 3. Lambdaå®Ÿè¡Œã‚¨ãƒ©ãƒ¼
```bash
# CloudWatch Logsç¢ºèª
aws logs describe-log-streams \
    --log-group-name "/aws/lambda/aws-byodmim-prod-dkim-manager"

# æœ€æ–°ãƒ­ã‚°ç¢ºèª
aws logs get-log-events \
    --log-group-name "/aws/lambda/aws-byodmim-prod-dkim-manager" \
    --log-stream-name "LATEST_STREAM_NAME"
```

## ğŸ“ ã‚µãƒãƒ¼ãƒˆãƒ»é€£çµ¡å…ˆ

### ğŸ”§ æŠ€è¡“ã‚µãƒãƒ¼ãƒˆ
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒ¼ãƒ **: å†…éƒ¨Slack #aws-ses-migration
- **AWSé‹ç”¨ãƒãƒ¼ãƒ **: ç¤¾å†…AWSé‹ç”¨ã‚µãƒãƒ¼ãƒˆ

### ğŸ“§ DNSç®¡ç†
- **DNSç®¡ç†ãƒãƒ¼ãƒ **: tomonaga@mx2.mesh.ne.jp
- **ç·Šæ€¥é€£çµ¡**: ç¤¾å†…DNSé‹ç”¨ãƒãƒ¼ãƒ 

### ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- **è¨­è¨ˆæ›¸**: `docs/implementation/DKIMè¨¼æ˜æ›¸è‡ªå‹•åŒ–è¨­è¨ˆæ›¸.md`
- **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­è¨ˆ**: `docs/implementation/CloudFormationãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­è¨ˆæ›¸.md`
- **é‹ç”¨ã‚¬ã‚¤ãƒ‰**: `docs/implementation/BYODKIMé‹ç”¨ã‚¬ã‚¤ãƒ‰.md`

---

## ğŸ‰ çµ±åˆå®Œäº†

ã“ã®ã‚¬ã‚¤ãƒ‰ã«å¾“ã£ã¦çµ±åˆã‚’å®Œäº†ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®çŠ¶æ…‹ã«ãªã‚Šã¾ã™ï¼š

- âœ… **æ¤œè¨¼æ¸ˆã¿BYODKIMå®Ÿè£…**ãŒç¨¼åƒ
- âœ… **æ®µéšçš„ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ**ã«ã‚ˆã‚‹å®‰å…¨ãªæ§‹ç¯‰
- âœ… **å®Œå…¨è‡ªå‹•åŒ–**ã•ã‚ŒãŸè¨¼æ˜æ›¸ç®¡ç†
- âœ… **åŒ…æ‹¬çš„ç›£è¦–**ã«ã‚ˆã‚‹ã‚·ã‚¹ãƒ†ãƒ å¥å…¨æ€§ç¢ºä¿
- âœ… **å†…éƒ¨DNSç®¡ç†ãƒ—ãƒ­ã‚»ã‚¹**å¯¾å¿œå®Œäº†

**ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼ğŸš€**

---

**æœ€çµ‚æ›´æ–°**: 2024å¹´12æœˆ19æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0  
**ä½œæˆè€…**: AI Assistant  
**æ‰¿èªè€…**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒ¼ãƒ 
