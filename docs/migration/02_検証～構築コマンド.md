# AWS SES ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ æ¤œè¨¼ï½æ§‹ç¯‰ã‚³ãƒãƒ³ãƒ‰

## æ¦‚è¦

AWS SES ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ¤œè¨¼ã‹ã‚‰æ§‹ç¯‰ã¾ã§ã®æ‰‹é †ã‚’è¨˜è¼‰ã—ãŸãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã§ã™ã€‚
æœ€çµ‚çš„ãªæ§‹ç¯‰ã¯Sceptreã§è¡Œã„ã¾ã™ãŒã€æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ãªã©ã®éš›ã¯AWS CLIãªã©ã‚’çµ„ã¿åˆã‚ã›ã¦ç°¡å˜ã«è¡Œãˆã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

## å‰ææ¡ä»¶

- AWS CLIãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿
- Sceptre 4.5.3ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿
- Python 3.8ä»¥ä¸ŠãŒåˆ©ç”¨å¯èƒ½ï¼ˆuvã‚’ä½¿ç”¨ï¼‰
- é©åˆ‡ãªAWSèªè¨¼æƒ…å ±ãŒè¨­å®šæ¸ˆã¿

## 1. AWS CLIã‚’ä½¿ã£ãŸæ§‹æ–‡ãƒã‚§ãƒƒã‚¯

### 1.1 CloudFormationãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ï¼ˆ6ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¯¾å¿œï¼‰

```bash
# åŸºæœ¬ã‚¤ãƒ³ãƒ•ãƒ©ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ§‹æ–‡ãƒã‚§ãƒƒã‚¯
aws cloudformation validate-template --template-body file://sceptre/templates/base.yaml --region ap-northeast-1

# SESãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ï¼ˆæœ¬ç•ªç”¨ï¼‰
aws cloudformation validate-template --template-body file://sceptre/templates/ses.yaml --region ap-northeast-1

# SESé–‹ç™ºãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ï¼ˆé–‹ç™ºç”¨ãƒ»æœ¬ç•ªä¾å­˜ï¼‰
aws cloudformation validate-template --template-body file://sceptre/templates/ses-dev.yaml --region ap-northeast-1

# Enhanced Kinesisãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ§‹æ–‡ãƒã‚§ãƒƒã‚¯
aws cloudformation validate-template --template-body file://sceptre/templates/enhanced-kinesis.yaml --region ap-northeast-1

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ§‹æ–‡ãƒã‚§ãƒƒã‚¯
aws cloudformation validate-template --template-body file://sceptre/templates/security.yaml --region ap-northeast-1

# ç›£è¦–ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ§‹æ–‡ãƒã‚§ãƒƒã‚¯
aws cloudformation validate-template --template-body file://sceptre/templates/monitoring.yaml --region ap-northeast-1
```

**å®Ÿè¡Œçµæœä¾‹**:
```bash
PS D:\AWS_SES_NOT_DNS\sceptre> aws cloudformation validate-template --template-body file://sceptre/templates/base.yaml
{
    "Parameters": [
        {
            "ParameterKey": "ProjectCode",
            "DefaultValue": "ses-migration",
            "NoEcho": false,
            "Description": "Project code for resource naming"
        },
        ...
    ]
}
```

### 1.2 ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèªï¼ˆå®Ÿéš›ã®æ§‹æˆï¼‰

```bash
# PowerShellã§ã®ç¢ºèª
Get-ChildItem sceptre/config/dev/*.yaml

# æœŸå¾…ã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå®Ÿè£…æ¸ˆã¿5ã‚¹ã‚¿ãƒƒã‚¯æ§‹æˆï¼‰
# - base.yaml
# - ses.yamlï¼ˆé–‹ç™ºç’°å¢ƒç”¨ãƒ»æœ¬ç•ªä¾å­˜ï¼‰
# - enhanced-kinesis.yaml
# - monitoring.yaml
# - security.yaml

# æœ¬ç•ªç’°å¢ƒã®ç¢ºèª
Get-ChildItem sceptre/config/prod/*.yaml

# æœŸå¾…ã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
# - config.yamlï¼ˆåŸºæœ¬è¨­å®šï¼‰
# - base.yaml
# - ses.yamlï¼ˆProduction-First EmailIdentityï¼‰
# - enhanced-kinesis.yaml
# - monitoring.yaml
# - security.yaml
# - README.mdï¼ˆç’°å¢ƒèª¬æ˜ï¼‰
```

### 1.3 YAMLæ§‹æ–‡ã®æ¤œè¨¼ï¼ˆ6ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¯¾å¿œï¼‰

```bash
# Pythonã‚’ä½¿ã£ãŸYAMLæ§‹æ–‡ãƒã‚§ãƒƒã‚¯ï¼ˆ6ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰
uv run python -c "import yaml; yaml.safe_load(open('sceptre/templates/base.yaml'))"
uv run python -c "import yaml; yaml.safe_load(open('sceptre/templates/ses.yaml'))"
uv run python -c "import yaml; yaml.safe_load(open('sceptre/templates/ses-dev.yaml'))"
uv run python -c "import yaml; yaml.safe_load(open('sceptre/templates/enhanced-kinesis.yaml'))"
uv run python -c "import yaml; yaml.safe_load(open('sceptre/templates/monitoring.yaml'))"
uv run python -c "import yaml; yaml.safe_load(open('sceptre/templates/security.yaml'))"

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ï¼ˆé–‹ç™ºç’°å¢ƒï¼‰
uv run python -c "import yaml; yaml.safe_load(open('sceptre/config/dev/base.yaml'))"
uv run python -c "import yaml; yaml.safe_load(open('sceptre/config/dev/ses.yaml'))"
uv run python -c "import yaml; yaml.safe_load(open('sceptre/config/dev/enhanced-kinesis.yaml'))"
uv run python -c "import yaml; yaml.safe_load(open('sceptre/config/dev/monitoring.yaml'))"
uv run python -c "import yaml; yaml.safe_load(open('sceptre/config/dev/security.yaml'))"

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
uv run python -c "import yaml; yaml.safe_load(open('sceptre/config/prod/base.yaml'))"
uv run python -c "import yaml; yaml.safe_load(open('sceptre/config/prod/ses.yaml'))"
uv run python -c "import yaml; yaml.safe_load(open('sceptre/config/prod/enhanced-kinesis.yaml'))"
uv run python -c "import yaml; yaml.safe_load(open('sceptre/config/prod/monitoring.yaml'))"
uv run python -c "import yaml; yaml.safe_load(open('sceptre/config/prod/security.yaml'))"
```

**å®Ÿè¡Œçµæœä¾‹**:
```bash
PS D:\AWS_SES_NOT_DNS\sceptre> uv run python -c "import yaml; yaml.safe_load(open('sceptre/config/dev/base.yaml'))"
# ã‚¨ãƒ©ãƒ¼ãŒãªã‘ã‚Œã°æ­£å¸¸
```

### 1.4 ãƒªã‚½ãƒ¼ã‚¹ä¾å­˜é–¢ä¿‚ã®ãƒã‚§ãƒƒã‚¯

```bash
# PowerShellã§ã®Refå‚ç…§ã®ç¢ºèª
Select-String -Path "sceptre/templates/*.yaml" -Pattern "Ref:"

# GetAttå‚ç…§ã®ç¢ºèª
Select-String -Path "sceptre/templates/*.yaml" -Pattern "GetAtt"

# ImportValueå‚ç…§ã®ç¢ºèª
Select-String -Path "sceptre/templates/*.yaml" -Pattern "ImportValue"
```

**å®Ÿè¡Œçµæœä¾‹**:
```bash
PS D:\AWS_SES_NOT_DNS\sceptre> Select-String -Path "sceptre/templates/*.yaml" -Pattern "Ref:"
sceptre/templates/base.yaml:  RetentionInDays: !Ref CloudWatchLogRetentionDays
sceptre/templates/base.yaml:  Endpoint: !Ref NotificationEmail
sceptre/templates/ses.yaml:  Name: !Sub "${ProjectCode}-${Environment}-ses-config"
sceptre/templates/ses-dev.yaml:  Name: !Sub "${ProjectCode}-${Environment}-ses-dev-config"
sceptre/templates/enhanced-kinesis.yaml:  DeliveryStreamName: !Sub "${ProjectCode}-${Environment}-raw-logs-stream"
sceptre/templates/enhanced-kinesis.yaml:  DeliveryStreamName: !Sub "${ProjectCode}-${Environment}-masked-logs-stream"
sceptre/templates/monitoring.yaml:  AlarmName: !Sub "${ProjectCode}-${Environment}-ses-bounce-rate"
sceptre/templates/security.yaml:  GroupName: !Sub "${ProjectCode}-${Environment}-admin-group"
...
```

## 2. ä¾å­˜é–¢ä¿‚ã®å¾ªç’°ãƒã‚§ãƒƒã‚¯

### 2.1 Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã‚ˆã‚‹ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯

```bash
# ä¾å­˜é–¢ä¿‚ã®å¾ªç’°ãƒã‚§ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
uv run python check_dependencies.py
```

**å®Ÿè¡Œçµæœä¾‹**:
```bash
ä¾å­˜é–¢ä¿‚ã®åˆ†æä¸­...
  base: []
  ses: ['base']
  ses-dev: ['base', 'prod/ses']  # é–‹ç™ºç’°å¢ƒã¯æœ¬ç•ªSESã«ä¾å­˜
  enhanced-kinesis: ['base', 'ses']
  monitoring: ['base', 'ses', 'enhanced-kinesis']
  security: ['base']

âœ“ å¾ªç’°å‚ç…§ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ

ä¾å­˜é–¢ä¿‚ã‚°ãƒ©ãƒ•ï¼ˆProduction-Firstæ§‹æˆï¼‰:
  base (ä¾å­˜ãªã—)
  ses <- base (Production EmailIdentity)
  ses-dev <- base, prod/ses (é–‹ç™ºç’°å¢ƒã€æœ¬ç•ªä¾å­˜)
  enhanced-kinesis <- base, ses
  monitoring <- base, ses, enhanced-kinesis
  security <- base
```

## 3. Sceptreã‚’ä½¿ã£ãŸä¾å­˜é–¢ä¿‚ã®è§£æ±ºã¨ã‚¹ã‚¿ãƒƒã‚¯ä½œæˆ

### 3.1 Sceptreã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª

```bash
uv run sceptre --version
```

**å®Ÿè¡Œçµæœä¾‹**:
```bash
PS D:\AWS_SES_NOT_DNS\sceptre> uv run sceptre --version
Sceptre, version 4.5.3
```

### 3.2 ã‚¹ã‚¿ãƒƒã‚¯ã®ä¸€è¦§è¡¨ç¤º

```bash
uv run sceptre list stacks
```

**å®Ÿè¡Œçµæœä¾‹**:
```bash
PS D:\AWS_SES_NOT_DNS\sceptre> uv run sceptre list stacks
dev/base.yaml
dev/ses.yaml
dev/enhanced-kinesis.yaml
dev/monitoring.yaml
dev/security.yaml
prod/base.yaml
prod/ses.yaml
prod/enhanced-kinesis.yaml
prod/monitoring.yaml
prod/security.yaml
```

### 3.3 è¨­å®šã®ç¢ºèª

```bash
# Baseã‚¹ã‚¿ãƒƒã‚¯ã®è¨­å®šç¢ºèª
uv run sceptre dump config dev/base.yaml

# SESã‚¹ã‚¿ãƒƒã‚¯ã®è¨­å®šç¢ºèª
uv run sceptre dump config dev/ses.yaml
```

**å®Ÿè¡Œçµæœä¾‹**:
```bash
PS D:\AWS_SES_NOT_DNS\sceptre> uv run sceptre dump config dev/base.yaml
---
environment: dev
parameters:
  AdminEmail: dev-admin@goo.ne.jp
  AllowedIPRanges:
  - 10.0.0.0/8
  - 192.168.1.0/24
  ...
```

### 3.4 ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ¤œè¨¼ï¼ˆ5ã‚¹ã‚¿ãƒƒã‚¯æ§‹æˆï¼‰

```bash
# å€‹åˆ¥ã‚¹ã‚¿ãƒƒã‚¯ã®æ¤œè¨¼ï¼ˆap-northeast-1ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰
uv run sceptre validate dev/base.yaml
uv run sceptre validate dev/ses.yaml
uv run sceptre validate dev/enhanced-kinesis.yaml
uv run sceptre validate dev/monitoring.yaml
uv run sceptre validate dev/security.yaml

# æœ¬ç•ªç’°å¢ƒã®æ¤œè¨¼
uv run sceptre validate prod/base.yaml
uv run sceptre validate prod/ses.yaml
uv run sceptre validate prod/enhanced-kinesis.yaml
uv run sceptre validate prod/monitoring.yaml
uv run sceptre validate prod/security.yaml
```

**æ³¨æ„äº‹é …**:
- ä¾å­˜ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆ`ses`ã€`enhanced-kinesis`ã€`monitoring`ã€`security`ï¼‰ã¯ã€ä¾å­˜ã™ã‚‹`base`ã‚¹ã‚¿ãƒƒã‚¯ãŒä½œæˆã•ã‚Œã‚‹ã¾ã§æ¤œè¨¼ã§ãã¾ã›ã‚“
- é–‹ç™ºç’°å¢ƒã®`ses.yaml`ï¼ˆses-dev.yamlãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰ã¯`prod/ses.yaml`ã«ä¾å­˜ã™ã‚‹ãŸã‚ã€æœ¬ç•ªEmailIdentityãŒä½œæˆã•ã‚Œã‚‹ã¾ã§æ¤œè¨¼ã§ãã¾ã›ã‚“

**å®Ÿè¡Œçµæœä¾‹**:
```bash
PS D:\AWS_SES_NOT_DNS\sceptre> uv run sceptre validate dev/base.yaml
Template dev/base is valid. Template details:
{'Parameters': [...], 'Description': 'Base Infrastructure for AWS SES Migration'}

PS D:\AWS_SES_NOT_DNS\sceptre> uv run sceptre validate dev/ses.yaml
"dev/ses: Dependency prod/ses not found. Please make sure that your dependencies stack_outputs have their full path from `config` defined."
```

### 3.5 ã‚¹ã‚¿ãƒƒã‚¯ã®ä½œæˆï¼ˆæ¨å¥¨é †åºï¼‰

#### 3.5.1 æœ¬ç•ªç’°å¢ƒã®ä½œæˆï¼ˆProduction-Firstï¼‰
```bash
# 1. æœ¬ç•ªBaseã‚¹ã‚¿ãƒƒã‚¯ã®ä½œæˆ
uv run sceptre launch prod/base.yaml

# 2. æœ¬ç•ªSESã‚¹ã‚¿ãƒƒã‚¯ã®ä½œæˆï¼ˆProduction-First EmailIdentityï¼‰
uv run sceptre launch prod/ses.yaml

# 3. æœ¬ç•ªEnhanced Kinesisã‚¹ã‚¿ãƒƒã‚¯ã®ä½œæˆ
uv run sceptre launch prod/enhanced-kinesis.yaml

# 4. æœ¬ç•ªç›£è¦–ã‚¹ã‚¿ãƒƒã‚¯ã®ä½œæˆ
uv run sceptre launch prod/monitoring.yaml

# 5. æœ¬ç•ªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚¿ãƒƒã‚¯ã®ä½œæˆ
uv run sceptre launch prod/security.yaml
```

#### 3.5.2 é–‹ç™ºç’°å¢ƒã®ä½œæˆï¼ˆæœ¬ç•ªä¾å­˜ï¼‰
```bash
# 1. é–‹ç™ºBaseã‚¹ã‚¿ãƒƒã‚¯ã®ä½œæˆ
uv run sceptre launch dev/base.yaml

# 2. é–‹ç™ºSESã‚¹ã‚¿ãƒƒã‚¯ã®ä½œæˆï¼ˆæœ¬ç•ªEmailIdentityã«ä¾å­˜ï¼‰
uv run sceptre launch dev/ses.yaml

# 3. é–‹ç™ºEnhanced Kinesisã‚¹ã‚¿ãƒƒã‚¯ã®ä½œæˆ
uv run sceptre launch dev/enhanced-kinesis.yaml

# 4. é–‹ç™ºç›£è¦–ã‚¹ã‚¿ãƒƒã‚¯ã®ä½œæˆ
uv run sceptre launch dev/monitoring.yaml

# 5. é–‹ç™ºã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚¿ãƒƒã‚¯ã®ä½œæˆ
uv run sceptre launch dev/security.yaml
```

**å®Ÿè¡Œçµæœä¾‹**:
```bash
PS D:\AWS_SES_NOT_DNS\sceptre> uv run sceptre launch dev/base.yaml
Do you want to launch 'dev\base.yaml' [y/N]: y
[2025-08-31 16:27:05] - dev/base - Launching Stack
[2025-08-31 16:27:06] - dev/base - Stack is in the ROLLBACK_COMPLETE state
[2025-08-31 16:27:10] - dev/base - delete complete
[2025-08-31 16:27:10] - dev/base - Creating Stack
[2025-08-31 16:27:10] - dev/base ses-migration-dev-base AWS::CloudFormation::Stack CREATE_IN_PROGRESS User Initiated
...
[2025-08-31 16:27:47] - dev/base ses-migration-dev-base AWS::CloudFormation::Stack CREATE_COMPLETE
```

### 3.6 ã‚¹ã‚¿ãƒƒã‚¯ã®æ›´æ–°

```bash
# Baseã‚¹ã‚¿ãƒƒã‚¯ã®æ›´æ–°
uv run sceptre update dev/base.yaml

# SESã‚¹ã‚¿ãƒƒã‚¯ã®æ›´æ–°
uv run sceptre update dev/ses.yaml
```

**å®Ÿè¡Œçµæœä¾‹**:
```bash
PS D:\AWS_SES_NOT_DNS\sceptre> uv run sceptre update dev/base.yaml
Do you want to update 'dev\base.yaml' [y/N]: y
[2025-08-31 16:42:41] - dev/base - Updating Stack
[2025-08-31 16:42:42] - dev/base ses-migration-dev-base AWS::CloudFormation::Stack UPDATE_IN_PROGRESS User Initiated
[2025-08-31 16:42:47] - dev/base ses-migration-dev-base AWS::CloudFormation::Stack UPDATE_COMPLETE
```

### 3.7 ã‚¹ã‚¿ãƒƒã‚¯ã®å‰Šé™¤

```bash
# SESã‚¹ã‚¿ãƒƒã‚¯ã®å‰Šé™¤
uv run sceptre delete dev/ses.yaml

# AWS CLIã§ã®ç›´æ¥å‰Šé™¤ï¼ˆä¾å­˜é–¢ä¿‚ã®å•é¡ŒãŒã‚ã‚‹å ´åˆï¼‰
aws cloudformation delete-stack --stack-name ses-migration-dev-ses
```

**å®Ÿè¡Œçµæœä¾‹**:
```bash
PS D:\AWS_SES_NOT_DNS\sceptre> uv run sceptre delete dev/ses.yaml
"dev/ses: Dependency base not found. Please make sure that your dependencies stack_outputs have their full path from `config` defined."

PS D:\AWS_SES_NOT_DNS\sceptre> aws cloudformation delete-stack --stack-name ses-migration-dev-ses
```

## 4. å‹•ä½œç¢ºèªãƒ»æ¤œè¨¼ã‚³ãƒãƒ³ãƒ‰

### 4.1 AWSãƒªã‚½ãƒ¼ã‚¹ã®å­˜åœ¨ç¢ºèª

```bash
# Baseã‚¹ã‚¿ãƒƒã‚¯ã®ãƒªã‚½ãƒ¼ã‚¹ç¢ºèª
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-base-dev --region ap-northeast-1
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-base-prod --region ap-northeast-1

# SESã‚¹ã‚¿ãƒƒã‚¯ã®ãƒªã‚½ãƒ¼ã‚¹ç¢ºèª
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-ses-dev --region ap-northeast-1
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-ses-prod --region ap-northeast-1

# Enhanced Kinesisã‚¹ã‚¿ãƒƒã‚¯ã®ãƒªã‚½ãƒ¼ã‚¹ç¢ºèª
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-enhanced-kinesis-dev --region ap-northeast-1
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-enhanced-kinesis-prod --region ap-northeast-1

# ç›£è¦–ã‚¹ã‚¿ãƒƒã‚¯ã®ãƒªã‚½ãƒ¼ã‚¹ç¢ºèª
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-monitoring-dev --region ap-northeast-1
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-monitoring-prod --region ap-northeast-1

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚¿ãƒƒã‚¯ã®ãƒªã‚½ãƒ¼ã‚¹ç¢ºèª
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-security-dev --region ap-northeast-1
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-security-prod --region ap-northeast-1
```

### 4.2 SESè¨­å®šã®ç¢ºèª

```bash
# Production-First EmailIdentityç¢ºèª
aws sesv2 get-email-identity --email-identity noreply@prod.nttdocomo-ocx.com --region ap-northeast-1

# é–‹ç™ºç’°å¢ƒã®EmailIdentityç¢ºèªï¼ˆæœ¬ç•ªå…±æœ‰ï¼‰
aws sesv2 get-email-identity --email-identity noreply@dev.nttdocomo-ocx.com --region ap-northeast-1

# DKIMè¨­å®šã®ç¢ºèª
aws sesv2 get-email-identity-dkim-attributes --email-identity noreply@prod.nttdocomo-ocx.com --region ap-northeast-1
aws sesv2 get-email-identity-dkim-attributes --email-identity noreply@dev.nttdocomo-ocx.com --region ap-northeast-1

# Configuration Setç¢ºèª
aws sesv2 list-configuration-sets --region ap-northeast-1
```

åˆæœŸã®è¨­å®šã§ã¯ä»¥ä¸‹ã®å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸï¼š

```yaml
# å•é¡Œã®ã‚ã‚‹è¨­å®š
dependencies:
  - base

parameters:
  S3BucketName: !stack_output base::S3BucketName
  SNSTopicArn: !stack_output base::SNSTopicArn
```

**ã‚¨ãƒ©ãƒ¼**: `"dev/ses: Dependency base not found. Please make sure that your dependencies stack_outputs have their full path from `config` defined."`

### 4.2 æ­£ã—ã„ä¾å­˜é–¢ä¿‚ã®è¨­å®š

Sceptre 4.5.3ã§ã¯ã€ä¾å­˜é–¢ä¿‚ã«å®Œå…¨ãªãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

```yaml
# æ­£ã—ã„è¨­å®š
dependencies:
  - dev/base.yaml

parameters:
  S3BucketName: !stack_output dev/base.yaml::S3BucketName
  SNSTopicArn: !stack_output dev/base.yaml::SNSTopicArn
```

### 4.3 å®Œå…¨ãƒªã‚»ãƒƒãƒˆã®æ‰‹é †

#### 4.3.1 æ—¢å­˜ã‚¹ã‚¿ãƒƒã‚¯ã®å‰Šé™¤

```bash
# å¤±æ•—ã—ãŸSESã‚¹ã‚¿ãƒƒã‚¯ã‚’å‰Šé™¤
aws cloudformation delete-stack --stack-name ses-migration-dev-ses

# å‰Šé™¤ã®å®Œäº†ã‚’ç¢ºèª
aws cloudformation describe-stacks --stack-name ses-migration-dev-ses --query 'Stacks[0].StackStatus' --output text
```

**å®Ÿè¡Œçµæœä¾‹**:
```bash
PS D:\AWS_SES_NOT_DNS\sceptre> aws cloudformation delete-stack --stack-name ses-migration-dev-ses
PS D:\AWS_SES_NOT_DNS\sceptre> aws cloudformation describe-stacks --stack-name ses-migration-dev-ses --query 'Stacks[0].StackStatus' --output text
An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ses-migration-dev-ses does not exist
```

#### 4.3.2 ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä¿®æ­£

**å•é¡Œ1: S3ãƒã‚±ãƒƒãƒˆã®ARNå½¢å¼**
```yaml
# ä¿®æ­£å‰
Resource: !Sub "${S3BucketName}/*"

# ä¿®æ­£å¾Œ
Resource: !Sub "arn:aws:s3:::${S3BucketName}/*"
```

**å•é¡Œ2: å­˜åœ¨ã—ãªã„IAMãƒãƒªã‚·ãƒ¼**
```yaml
# ä¿®æ­£å‰
ManagedPolicyArns:
  - arn:aws:iam::aws:policy/service-role/AmazonSESRole

# ä¿®æ­£å¾Œï¼ˆå‰Šé™¤ï¼‰
# ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªã‚·ãƒ¼ã®ã¿ã‚’ä½¿ç”¨
```

**å•é¡Œ3: Lambdaé–¢æ•°ã®IAMãƒ­ãƒ¼ãƒ«ä¿¡é ¼é–¢ä¿‚**
```yaml
# ä¿®æ­£å‰ï¼ˆSESç”¨ãƒ­ãƒ¼ãƒ«ã‚’Lambdaã§ä½¿ç”¨ï¼‰
Role: !GetAtt SESIAMRole.Arn

# ä¿®æ­£å¾Œï¼ˆLambdaç”¨ãƒ­ãƒ¼ãƒ«ã‚’åˆ¥é€”ä½œæˆï¼‰
Role: !GetAtt LambdaIAMRole.Arn
```

#### 4.3.3 ä¿®æ­£å¾Œã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ¤œè¨¼

```bash
# ä¾å­˜é–¢ä¿‚ãŒæ­£ã—ãè§£æ±ºã•ã‚Œã‚‹ã‹ç¢ºèª
uv run sceptre validate dev/ses.yaml
```

**å®Ÿè¡Œçµæœä¾‹**:
```bash
PS D:\AWS_SES_NOT_DNS\sceptre> uv run sceptre validate dev/ses.yaml
Template dev/base is valid. Template details:
{'Parameters': [...], 'Description': 'Base Infrastructure for AWS SES Migration'}
Template dev/ses is valid. Template details:
{'Parameters': [...], 'Description': 'Complete SES Configuration for AWS SES Migration with Personal Information Protection - Tokyo Region (ap-northeast-1)', 'Capabilities': [AWS::IAM::Role]}
```

#### 4.3.4 ä¿®æ­£å¾Œã®ã‚¹ã‚¿ãƒƒã‚¯ä½œæˆ

```bash
# ä¿®æ­£ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§SESã‚¹ã‚¿ãƒƒã‚¯ã‚’ä½œæˆ
uv run sceptre launch dev/ses.yaml
```

**å®Ÿè¡Œçµæœä¾‹**:
```bash
PS D:\AWS_SES_NOT_DNS\sceptre> uv run sceptre launch dev/ses.yaml
Do you want to launch 'dev\ses.yaml' [y/N]: y
[2025-08-31 17:11:04] - dev/base - Launching Stack
[2025-08-31 17:11:05] - dev/base - Stack is in the UPDATE_COMPLETE state
[2025-08-31 17:11:05] - dev/base - Updating Stack
[2025-08-31 17:11:05] - dev/base - No updates to perform.
[2025-08-31 17:11:05] - dev/ses - Launching Stack
[2025-08-31 17:11:05] - dev/ses - Stack is in the ROLLBACK_COMPLETE state
[2025-08-31 17:11:05] - dev/ses - Deleting stack
[2025-08-31 17:11:06] - dev/ses ses-migration-dev-ses AWS::CloudFormation::Stack DELETE_IN_PROGRESS User Initiated
[2025-08-31 17:11:10] - dev/ses - delete complete
[2025-08-31 17:11:10] - dev/ses - Creating Stack
[2025-08-31 17:11:10] - dev/ses ses-migration-dev-ses AWS::CloudFormation::Stack CREATE_IN_PROGRESS User Initiated
...
[2025-08-31 17:13:27] - dev/ses SESEmailIdentity AWS::SES::EmailIdentity CREATE_COMPLETE
[2025-08-31 17:13:27] - dev/ses ses-migration-dev-ses AWS::CloudFormation::Stack CREATE_COMPLETE
```

## 5. å®Ÿéš›ã«ç™ºç”Ÿã—ãŸå•é¡Œã¨ãã®è§£æ±ºæ–¹æ³•

### 5.1 Baseã‚¹ã‚¿ãƒƒã‚¯ä½œæˆæ™‚ã®å•é¡Œ

#### å•é¡Œ1: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä¸ä¸€è‡´
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `Parameters: [...] do not exist in the template`
**åŸå› **: `sceptre/config/dev/base.yaml`ã§å®šç¾©ã•ã‚ŒãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒ`base.yaml`ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«å­˜åœ¨ã—ãªã„
**è§£æ±ºæ–¹æ³•**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ä¸è¶³ã—ã¦ã„ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ 

#### å•é¡Œ2: ç’°å¢ƒåã®æ¤œè¨¼ã‚¨ãƒ©ãƒ¼
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `Parameter 'Environment' must be one of AllowedValues`
**åŸå› **: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§`Environment: dev`ã‚’æŒ‡å®šã—ã¦ã„ãŸãŒã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã¯`["development", "staging", "production"]`ã®ã¿è¨±å¯
**è§£æ±ºæ–¹æ³•**: `sceptre/config/dev/base.yaml`ã§`Environment: development`ã«å¤‰æ›´

### 5.2 SESã‚¹ã‚¿ãƒƒã‚¯ä½œæˆæ™‚ã®å•é¡Œ

#### å•é¡Œ3: CloudFormationãƒªã‚½ãƒ¼ã‚¹å®šç¾©ã®ä¸æ•´åˆ
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `Properties validation failed for resource SESConfigurationSetEventDestination`
**åŸå› **: AWS SES v2ã®CloudFormationãƒªã‚½ãƒ¼ã‚¹å®šç¾©ãŒå¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç”¨
**è§£æ±ºæ–¹æ³•**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å¤§å¹…ã«ç°¡ç´ åŒ–ã—ã€æ­£ã—ã„AWS SES v2ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨

#### å•é¡Œ4: CloudWatch Logsä¿æŒæœŸé–“ã®æ¤œè¨¼ã‚¨ãƒ©ãƒ¼
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `RetentionInDays: only 1 subschema matches out of 2`
**åŸå› **: `CloudWatchLogRetentionDays`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„
**è§£æ±ºæ–¹æ³•**: `sceptre/config/dev/ses.yaml`ã§`CloudWatchLogRetentionDays: 30`ã‚’æ˜ç¤ºçš„ã«è¨­å®š

#### å•é¡Œ5: S3 ARNå½¢å¼ã®ã‚¨ãƒ©ãƒ¼
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `Resource ses-migration-development-logs-627642418836/* must be in ARN format or "*"`
**åŸå› **: IAMãƒãƒªã‚·ãƒ¼ã®S3ãƒªã‚½ãƒ¼ã‚¹æŒ‡å®šãŒæ­£ã—ã„ARNå½¢å¼ã§ã¯ãªã„
**è§£æ±ºæ–¹æ³•**: `!Sub "${S3BucketName}/*"` â†’ `!Sub "arn:aws:s3:::${S3BucketName}/*"`

#### å•é¡Œ6: IAMãƒãƒªã‚·ãƒ¼ã®å­˜åœ¨ã—ãªã„å‚ç…§
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `Policy arn:aws:iam::aws:policy/service-role/AmazonSESRole does not exist or is not attachable`
**åŸå› **: å­˜åœ¨ã—ãªã„ãƒãƒãƒ¼ã‚¸ãƒ‰ãƒãƒªã‚·ãƒ¼ã‚’å‚ç…§
**è§£æ±ºæ–¹æ³•**: `ManagedPolicyArns`ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã€å¿…è¦ãªSESã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªã‚·ãƒ¼ã«ç›´æ¥è¿½åŠ 

#### å•é¡Œ7: Lambdaé–¢æ•°ã®ãƒ­ãƒ¼ãƒ«ä¿¡é ¼é–¢ä¿‚ã‚¨ãƒ©ãƒ¼
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `The role defined for the function cannot be assumed by Lambda`
**åŸå› **: `AssumeRolePolicyDocument`ã§`Service: ses.amazonaws.com`ã‚’æŒ‡å®šã—ã¦ã„ãŸ
**è§£æ±ºæ–¹æ³•**: å°‚ç”¨ã®`LambdaIAMRole`ã‚’ä½œæˆã—ã€`Service: lambda.amazonaws.com`ã‚’æŒ‡å®š

### 5.3 Monitoringã‚¹ã‚¿ãƒƒã‚¯ä½œæˆæ™‚ã®å•é¡Œ

#### å•é¡Œ8: CloudWatch Logsä¿æŒæœŸé–“ã®æ¤œè¨¼ã‚¨ãƒ©ãƒ¼
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `RetentionInDays: only 1 subschema matches out of 2`
**åŸå› **: `JapaneseComplianceMonitoringLogGroup`ã§`2555`ã‚’ç›´æ¥æŒ‡å®šã—ã¦ã„ãŸ
**è§£æ±ºæ–¹æ³•**: `!Ref CloudWatchLogRetentionDays`ã‚’ä½¿ç”¨ã—ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰å€¤ã‚’å–å¾—

#### å•é¡Œ9: è¤‡åˆã‚¢ãƒ©ãƒ¼ãƒ ã®å‚ç…§ã‚¨ãƒ©ãƒ¼
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `alarms [arn:aws:cloudwatch:ap-northeast-1:627642418836:alarm:ses-migration-development-ses-send-failure] in the alarm rule do not exist`
**åŸå› **: å­˜åœ¨ã—ãªã„ã‚¢ãƒ©ãƒ¼ãƒ `ses-migration-development-ses-send-failure`ã‚’å‚ç…§ã—ã¦ã„ãŸ
**è§£æ±ºæ–¹æ³•**: è¤‡åˆã‚¢ãƒ©ãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒ«ã‹ã‚‰å­˜åœ¨ã—ãªã„ã‚¢ãƒ©ãƒ¼ãƒ ã®å‚ç…§ã‚’å‰Šé™¤ã—ã€æ—¢å­˜ã®SESã‚¹ã‚¿ãƒƒã‚¯ã‚¢ãƒ©ãƒ¼ãƒ ã®ã¿ã‚’å‚ç…§

### 5.4 Securityã‚¹ã‚¿ãƒƒã‚¯ä½œæˆæ™‚ã®å•é¡Œ

#### å•é¡Œ10: IAM Groupã®Tagsãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚¨ãƒ©ãƒ¼
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `Properties validation failed for resource SESAdminGroup with message: [#: extraneous key [Tags] is not permitted]`
**åŸå› **: IAM Groupãƒªã‚½ãƒ¼ã‚¹ã§`Tags`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒè¨±å¯ã•ã‚Œã¦ã„ãªã„
**è§£æ±ºæ–¹æ³•**: ã™ã¹ã¦ã®IAM Groupãƒªã‚½ãƒ¼ã‚¹ã‹ã‚‰`Tags`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å‰Šé™¤

#### å•é¡Œ11: CloudWatch Logsä¿æŒæœŸé–“ã®æ¤œè¨¼ã‚¨ãƒ©ãƒ¼
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `RetentionInDays: only 1 subschema matches out of 2`
**åŸå› **: Securityãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§`CloudWatchLogRetentionDays`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå®šç¾©ã•ã‚Œã¦ã„ãªã„
**è§£æ±ºæ–¹æ³•**: Securityãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«`CloudWatchLogRetentionDays`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ 

#### å•é¡Œ12: å­˜åœ¨ã—ãªã„IAMãƒãƒªã‚·ãƒ¼ã®å‚ç…§
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `Policy arn:aws:iam::aws:policy/service-role/CloudWatchAgentServerPolicy does not exist or is not attachable`
**åŸå› **: å­˜åœ¨ã—ãªã„ãƒãƒãƒ¼ã‚¸ãƒ‰ãƒãƒªã‚·ãƒ¼ã‚’å‚ç…§
**è§£æ±ºæ–¹æ³•**: `ManagedPolicyArns`ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤

#### å•é¡Œ13: IAMãƒãƒªã‚·ãƒ¼ã®ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `The role with name dev-admin cannot be found`
**åŸå› **: IAMãƒãƒªã‚·ãƒ¼ãŒIAMãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç›´æ¥å‚ç…§ã—ã¦ã„ãŸãŸã‚ã€CloudFormationã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ã§IAMãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…ˆã«å‰Šé™¤ã•ã‚ŒãŸ
**è§£æ±ºæ–¹æ³•**: IAMãƒãƒªã‚·ãƒ¼ãŒIAMã‚°ãƒ«ãƒ¼ãƒ—ã®ã¿ã‚’å‚ç…§ã™ã‚‹ã‚ˆã†ã«ä¿®æ­£ã—ã€IAMãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®ç›´æ¥çš„ãªä¾å­˜é–¢ä¿‚ã‚’å‰Šé™¤

### 5.5 Enhanced Kinesisã‚¹ã‚¿ãƒƒã‚¯ä½œæˆæ™‚ã®å•é¡Œ

#### å•é¡Œ14: Kinesis Data Streamã®ã‚·ãƒ£ãƒ¼ãƒ‰æ•°ã‚¨ãƒ©ãƒ¼
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `ShardCount must be between 1 and 100000`
**åŸå› **: ShardCountãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒé©åˆ‡ã«è¨­å®šã•ã‚Œã¦ã„ãªã„
**è§£æ±ºæ–¹æ³•**: `sceptre/config/dev/enhanced-kinesis.yaml`ã§`ShardCount: 1`ã‚’æ˜ç¤ºçš„ã«è¨­å®š

#### å•é¡Œ15: Firehose Delivery Streamã®å®›å…ˆè¨­å®šã‚¨ãƒ©ãƒ¼
**ã‚¨ãƒ©ãƒ¼å†…å®¹**: `ExtendedS3DestinationConfiguration requires BufferingHints`
**åŸå› **: Firehoseã®å®›å…ˆè¨­å®šã§BufferingHintsãŒä¸è¶³
**è§£æ±ºæ–¹æ³•**: BufferingHintsãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã—ã€é©åˆ‡ãªã‚µã‚¤ã‚ºã¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã‚’è¨­å®š

## 6. æˆåŠŸã—ãŸã‚¹ã‚¿ãƒƒã‚¯ä½œæˆçµæœ

### 6.1 Production-Firstç’°å¢ƒã®æ§‹ç¯‰çµæœ

#### æœ¬ç•ªç’°å¢ƒã‚¹ã‚¿ãƒƒã‚¯
- **Baseã‚¹ã‚¿ãƒƒã‚¯**: `CREATE_COMPLETE`
  - S3ãƒã‚±ãƒƒãƒˆ: `ses-migration-production-logs-627642418836`
  - SNSãƒˆãƒ”ãƒƒã‚¯: `ses-migration-production-alerts`
  - CloudWatch Logsã‚°ãƒ«ãƒ¼ãƒ—: `/ses/production/application`

- **SESã‚¹ã‚¿ãƒƒã‚¯**: `CREATE_COMPLETE`
  - EmailIdentity: `noreply@prod.nttdocomo-ocx.com`
  - Configuration Set: `ses-migration-production-config`
  - DKIMè¨­å®š: enabledï¼ˆè‡ªå‹•ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æœ‰åŠ¹ï¼‰

- **Enhanced Kinesisã‚¹ã‚¿ãƒƒã‚¯**: `CREATE_COMPLETE`
  - Data Stream: `ses-event-stream-prod`
  - Delivery Stream: `ses-logs-delivery-stream-prod`
  - S3å®›å…ˆ: `ses-migration-production-logs-627642418836/kinesis/`

#### é–‹ç™ºç’°å¢ƒã‚¹ã‚¿ãƒƒã‚¯
- **Baseã‚¹ã‚¿ãƒƒã‚¯**: `CREATE_COMPLETE`
  - S3ãƒã‚±ãƒƒãƒˆ: `ses-migration-development-logs-627642418836`
  - SNSãƒˆãƒ”ãƒƒã‚¯: `ses-migration-development-alerts`
  - CloudWatch Logsã‚°ãƒ«ãƒ¼ãƒ—: `/ses/development/application`

- **SESã‚¹ã‚¿ãƒƒã‚¯ï¼ˆses-devãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½¿ç”¨ï¼‰**: `CREATE_COMPLETE`
  - EmailIdentity: `noreply@dev.nttdocomo-ocx.com`ï¼ˆæœ¬ç•ªEmailIdentityã«ä¾å­˜ï¼‰
  - Configuration Set: `ses-migration-development-config`
  - æœ¬ç•ªDKIMã‚­ãƒ¼ã‚’å…±æœ‰ä½¿ç”¨

- **Enhanced Kinesisã‚¹ã‚¿ãƒƒã‚¯**: `CREATE_COMPLETE`
  - Data Stream: `ses-event-stream-dev`
  - Delivery Stream: `ses-logs-delivery-stream-dev`
  - S3å®›å…ˆ: `ses-migration-development-logs-627642418836/kinesis/`
- **ä¸»è¦ãƒªã‚½ãƒ¼ã‚¹**:
  - CloudWatchã‚¢ãƒ©ãƒ¼ãƒ ï¼ˆSESé€ä¿¡å¤±æ•—ã€è¤‡åˆã‚¢ãƒ©ãƒ¼ãƒ ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ï¼‰
  - CloudWatchãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆãƒ¡ã‚¤ãƒ³ç›£è¦–ã€æ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³å°‚ç”¨ï¼‰
  - CloudWatch Log Groupsï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€æ—¥æœ¬èªã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã€ãƒ‡ãƒ¼ã‚¿ãƒã‚¹ã‚­ãƒ³ã‚°ï¼‰
  - CloudWatch Insights Queriesï¼ˆSESåˆ†æã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ã‚¨ãƒ©ãƒ¼ã€ãƒã‚¹ã‚¯æ¸ˆã¿ã€æ—¥æœ¬èªç›£è¦–ï¼‰
  - Lambdaé–¢æ•°ï¼ˆå€‹äººæƒ…å ±ãƒã‚¹ã‚­ãƒ³ã‚°ï¼‰
  - IAMãƒ­ãƒ¼ãƒ«ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒã‚¹ã‚­ãƒ³ã‚°é–¢æ•°ç”¨ï¼‰

### **Securityã‚¹ã‚¿ãƒƒã‚¯**
- **çŠ¶æ…‹**: `CREATE_COMPLETE`
- **ä½œæˆæ—¥æ™‚**: 2025-08-31
- **ä¸»è¦ãƒªã‚½ãƒ¼ã‚¹**:
  - IAM Groupsï¼ˆç®¡ç†è€…ã€èª­ã¿å–ã‚Šå°‚ç”¨ã€ç›£è¦–ç”¨ï¼‰
  - IAM Usersï¼ˆç®¡ç†è€…ã€èª­ã¿å–ã‚Šå°‚ç”¨ã€ç›£è¦–ç”¨ï¼‰
  - IAM Policiesï¼ˆå€‹äººæƒ…å ±ä¿è­·ã€IPåˆ¶é™ï¼‰
  - CloudWatch Log Groupsï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆã€æ—¥æœ¬èªã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ï¼‰
  - CloudWatch Dashboardsï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€æ—¥æœ¬èªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€æ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼‰
  - CloudWatch Alarmsï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆï¼‰
  - IAM Roleï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£è¦–ç”¨ï¼‰

## 3.7 å…¨ã‚¹ã‚¿ãƒƒã‚¯ä½œæˆå®Œäº†

### **å®Œäº†çŠ¶æ³**
ğŸ¯ **å…¨ã‚¹ã‚¿ãƒƒã‚¯ä½œæˆå®Œäº†**
- âœ… Baseã‚¹ã‚¿ãƒƒã‚¯ï¼ˆåŸºæœ¬ã‚¤ãƒ³ãƒ•ãƒ©ï¼‰
- âœ… SESã‚¹ã‚¿ãƒƒã‚¯ï¼ˆãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚µãƒ¼ãƒ“ã‚¹ï¼‰
- âœ… Monitoringã‚¹ã‚¿ãƒƒã‚¯ï¼ˆç›£è¦–ãƒ»ãƒ­ã‚°ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒã‚¹ã‚­ãƒ³ã‚°ï¼‰
- âœ… Securityã‚¹ã‚¿ãƒƒã‚¯ï¼ˆIAMãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼‰

### **ä½œæˆã•ã‚ŒãŸã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã®æ¦‚è¦**

#### **1. åŸºæœ¬ã‚¤ãƒ³ãƒ•ãƒ©ï¼ˆBaseï¼‰**
- S3ãƒã‚±ãƒƒãƒˆï¼ˆãƒ­ã‚°ä¿å­˜ç”¨ï¼‰
- SNSãƒˆãƒ”ãƒƒã‚¯ï¼ˆé€šçŸ¥ç”¨ï¼‰
- CloudWatch Logsï¼ˆåŸºæœ¬ãƒ­ã‚°æ©Ÿèƒ½ï¼‰

#### **2. ãƒ¡ãƒ¼ãƒ«ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆSESï¼‰**
- AWS SESè¨­å®š
- CloudWatchã‚¢ãƒ©ãƒ¼ãƒ ï¼ˆãƒã‚¦ãƒ³ã‚¹ç‡ã€è‹¦æƒ…ç‡ï¼‰
- Lambdaé–¢æ•°ï¼ˆSESå‡¦ç†ç”¨ï¼‰
- IAMãƒ­ãƒ¼ãƒ«ï¼ˆSESã‚µãƒ¼ãƒ“ã‚¹ç”¨ï¼‰

#### **3. ç›£è¦–ãƒ»ãƒ­ã‚°ï¼ˆMonitoringï¼‰**
- CloudWatchã‚¢ãƒ©ãƒ¼ãƒ ï¼ˆSESé€ä¿¡å¤±æ•—ã€è¤‡åˆã‚¢ãƒ©ãƒ¼ãƒ ï¼‰
- CloudWatchãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆç›£è¦–ç”¨ï¼‰
- CloudWatch Insights Queriesï¼ˆSESåˆ†æç”¨ï¼‰
- Lambdaé–¢æ•°ï¼ˆå€‹äººæƒ…å ±ãƒã‚¹ã‚­ãƒ³ã‚°ï¼‰
- æ—¥æœ¬èªã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ç›£è¦–

#### **4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆSecurityï¼‰**
- IAMãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆç®¡ç†è€…ã€èª­ã¿å–ã‚Šå°‚ç”¨ã€ç›£è¦–ç”¨ï¼‰
- IAMãƒãƒªã‚·ãƒ¼ï¼ˆå€‹äººæƒ…å ±ä¿è­·ã€IPåˆ¶é™ï¼‰
- CloudWatchã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£è¦–
- æ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³å°‚ç”¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½

## 3.8 æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼šçµ±åˆãƒ†ã‚¹ãƒˆã¨æœ¬ç•ªé©ç”¨

### **æº–å‚™å®Œäº†**
å…¨ã‚¹ã‚¿ãƒƒã‚¯ãŒæ­£å¸¸ã«ä½œæˆã•ã‚Œã€AWS SES Migrationã®åŸºç›¤ã‚¤ãƒ³ãƒ•ãƒ©ãŒå®Œæˆã—ã¾ã—ãŸã€‚

### **çµ±åˆãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ**
```bash
# å…¨ã‚¹ã‚¿ãƒƒã‚¯ã®çŠ¶æ…‹ç¢ºèª
uv run sceptre status dev/

# å„ã‚¹ã‚¿ãƒƒã‚¯ã®è©³ç´°ç¢ºèª
uv run sceptre describe dev/base.yaml
uv run sceptre describe dev/ses.yaml
uv run sceptre describe dev/monitoring.yaml
uv run sceptre describe dev/security.yaml
```

### **æœ¬ç•ªç’°å¢ƒã¸ã®é©ç”¨æº–å‚™**
1. **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æœ¬ç•ªç’°å¢ƒç”¨èª¿æ•´**
   - `sceptre/config/prod/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®è¨­å®šç¢ºèª
   - æœ¬ç•ªç’°å¢ƒç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¿æ•´

2. **æœ¬ç•ªç’°å¢ƒã§ã®ã‚¹ã‚¿ãƒƒã‚¯ä½œæˆ**
   ```bash
   # æœ¬ç•ªç’°å¢ƒã§ã®ã‚¹ã‚¿ãƒƒã‚¯ä½œæˆ
   uv run sceptre launch prod/base.yaml
   uv run sceptre launch prod/ses.yaml
   uv run sceptre launch prod/monitoring.yaml
   uv run sceptre launch prod/security.yaml
   ```

### **é‹ç”¨ãƒ»ç›£è¦–ã®é–‹å§‹**
- CloudWatchãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã®ç›£è¦–é–‹å§‹
- SESãƒ¡ãƒ¼ãƒ«é€ä¿¡ã®ãƒ†ã‚¹ãƒˆ
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ©ãƒ¼ãƒˆã®å‹•ä½œç¢ºèª
- å€‹äººæƒ…å ±ãƒã‚¹ã‚­ãƒ³ã‚°æ©Ÿèƒ½ã®æ¤œè¨¼

## 3.9 ã‚¹ã‚¿ãƒƒã‚¯ã®å‰Šé™¤æ‰‹é †

### **æ¦‚è¦**
é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆãŒå®Œäº†ã—ãŸdevç’°å¢ƒã®ã‚¹ã‚¿ãƒƒã‚¯ã‚’å‰Šé™¤ã™ã‚‹æ‰‹é †ã§ã™ã€‚ä¾å­˜é–¢ä¿‚ã‚’è€ƒæ…®ã—ã¦ã€æ­£ã—ã„é †åºã§å‰Šé™¤ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### **å‰Šé™¤å‰ã®ç¢ºèªäº‹é …**

#### **1. é‡è¦ãªãƒ‡ãƒ¼ã‚¿ã®ç¢ºèª**
- S3ãƒã‚±ãƒƒãƒˆå†…ã®ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿
- CloudWatch Logsã®é‡è¦ãªãƒ­ã‚°
- SESã®è¨­å®šæƒ…å ±
- IAMãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼

#### **2. ä¾å­˜é–¢ä¿‚ã®ç¢ºèª**
```bash
# ç¾åœ¨ã®ã‚¹ã‚¿ãƒƒã‚¯çŠ¶æ³ç¢ºèª
uv run sceptre status dev

# æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›
{
    "dev/base": "UPDATE_COMPLETE",
    "dev/ses": "CREATE_COMPLETE",
    "dev/monitoring": "CREATE_COMPLETE",
    "dev/security": "CREATE_COMPLETE"
}
```

### **å‰Šé™¤æ‰‹é †ï¼ˆä¾å­˜é–¢ä¿‚ã®é€†é †ï¼‰**

#### **Step 1: Securityã‚¹ã‚¿ãƒƒã‚¯ã®å‰Šé™¤**
```bash
# æœ€å¾Œã«ä½œæˆã•ã‚ŒãŸã‚¹ã‚¿ãƒƒã‚¯ã‹ã‚‰å‰Šé™¤é–‹å§‹
aws cloudformation delete-stack --stack-name ses-migration-dev-security

# å‰Šé™¤çŠ¶æ³ã®ç¢ºèª
aws cloudformation describe-stacks --stack-name ses-migration-dev-security
```

#### **Step 2: Monitoringã‚¹ã‚¿ãƒƒã‚¯ã®å‰Šé™¤**
```bash
# Securityã‚¹ã‚¿ãƒƒã‚¯ã«ä¾å­˜ã™ã‚‹Monitoringã‚¹ã‚¿ãƒƒã‚¯ã‚’å‰Šé™¤
aws cloudformation delete-stack --stack-name ses-migration-dev-monitoring

# å‰Šé™¤çŠ¶æ³ã®ç¢ºèª
aws cloudformation describe-stacks --stack-name ses-migration-dev-monitoring
```

#### **Step 3: SESã‚¹ã‚¿ãƒƒã‚¯ã®å‰Šé™¤**
```bash
# Monitoringã‚¹ã‚¿ãƒƒã‚¯ã«ä¾å­˜ã™ã‚‹SESã‚¹ã‚¿ãƒƒã‚¯ã‚’å‰Šé™¤
aws cloudformation delete-stack --stack-name ses-migration-dev-ses

# å‰Šé™¤çŠ¶æ³ã®ç¢ºèª
aws cloudformation describe-stacks --stack-name ses-migration-dev-ses
```

#### **Step 4: Baseã‚¹ã‚¿ãƒƒã‚¯ã®å‰Šé™¤**
```bash
# æœ€åˆã«ä½œæˆã•ã‚ŒãŸBaseã‚¹ã‚¿ãƒƒã‚¯ã‚’æœ€å¾Œã«å‰Šé™¤
aws cloudformation delete-stack --stack-name ses-migration-dev-base

# å‰Šé™¤çŠ¶æ³ã®ç¢ºèª
aws cloudformation describe-stacks --stack-name ses-migration-dev-base
```

### **å‰Šé™¤ã®é€²è¡ŒçŠ¶æ³ç›£è¦–**

#### **1. å€‹åˆ¥ã‚¹ã‚¿ãƒƒã‚¯ã®çŠ¶æ³ç¢ºèª**
```bash
# å‰Šé™¤ä¸­ã®ã‚¹ã‚¿ãƒƒã‚¯ã‚’ç¢ºèª
aws cloudformation list-stacks --stack-status-filter DELETE_IN_PROGRESS

# å‰Šé™¤å®Œäº†ã—ãŸã‚¹ã‚¿ãƒƒã‚¯ã‚’ç¢ºèª
aws cloudformation list-stacks --stack-status-filter DELETE_COMPLETE

# æ®‹å­˜ã™ã‚‹ã‚¹ã‚¿ãƒƒã‚¯ã‚’ç¢ºèª
aws cloudformation list-stacks --stack-status-filter CREATE_COMPLETE UPDATE_COMPLETE --query 'StackSummaries[?contains(StackName, `dev`)]'
```

#### **2. å‰Šé™¤å®Œäº†ã®ç¢ºèª**
```bash
# devç’°å¢ƒã®ã‚¹ã‚¿ãƒƒã‚¯ãŒã™ã¹ã¦å‰Šé™¤ã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèª
aws cloudformation list-stacks --stack-status-filter CREATE_COMPLETE UPDATE_COMPLETE --query 'StackSummaries[?contains(StackName, `dev`)]'

# æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›ï¼ˆç©ºã®é…åˆ—ï¼‰
[]
```

### **Sceptreã‚’ä½¿ç”¨ã—ãŸå‰Šé™¤ï¼ˆä»£æ›¿æ‰‹æ®µï¼‰**

#### **æ³¨æ„äº‹é …**
- Sceptreã®`delete`ã‚³ãƒãƒ³ãƒ‰ã§Change Setã®ã¿ãŒå‰Šé™¤ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚‹
- ã‚¹ã‚¿ãƒƒã‚¯ãŒæ®‹å­˜ã™ã‚‹å ´åˆã¯ã€AWS CLIã§ã®ç›´æ¥å‰Šé™¤ã‚’æ¨å¥¨

#### **Sceptreã§ã®å‰Šé™¤è©¦è¡Œ**
```bash
# ä¾å­˜é–¢ä¿‚ã®é€†é †ã§å‰Šé™¤ã‚’è©¦è¡Œ
uv run sceptre delete dev security -y
uv run sceptre delete dev monitoring -y
uv run sceptre delete dev ses -y
uv run sceptre delete dev base -y

# å‰Šé™¤çŠ¶æ³ã®ç¢ºèª
uv run sceptre status dev
```

### **ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**

#### **1. ã‚¹ã‚¿ãƒƒã‚¯ãŒå‰Šé™¤ã•ã‚Œãªã„å ´åˆ**
```bash
# ã‚¹ã‚¿ãƒƒã‚¯ã®è©³ç´°çŠ¶æ³ç¢ºèª
aws cloudformation describe-stacks --stack-name [ã‚¹ã‚¿ãƒƒã‚¯å]

# ã‚¹ã‚¿ãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã®ç¢ºèª
aws cloudformation describe-stack-events --stack-name [ã‚¹ã‚¿ãƒƒã‚¯å]

# å¼·åˆ¶å‰Šé™¤ã®å®Ÿè¡Œï¼ˆæ³¨æ„: ãƒ‡ãƒ¼ã‚¿ãŒå¤±ã‚ã‚Œã‚‹å¯èƒ½æ€§ï¼‰
aws cloudformation delete-stack --stack-name [ã‚¹ã‚¿ãƒƒã‚¯å] --retain-resources [ãƒªã‚½ãƒ¼ã‚¹å]
```

#### **2. ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å ´åˆ**
```bash
# ä¾å­˜é–¢ä¿‚ã®è©³ç´°ç¢ºèª
aws cloudformation describe-stack-resources --stack-name [ã‚¹ã‚¿ãƒƒã‚¯å]

# æ‰‹å‹•ã§ãƒªã‚½ãƒ¼ã‚¹ã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰ã‚¹ã‚¿ãƒƒã‚¯ã‚’å‰Šé™¤
aws [ã‚µãƒ¼ãƒ“ã‚¹å] delete-[ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—] --[ãƒªã‚½ãƒ¼ã‚¹è­˜åˆ¥å­] [å€¤]
```

### **å‰Šé™¤å®Œäº†å¾Œã®ç¢ºèª**

#### **1. ãƒªã‚½ãƒ¼ã‚¹ã®æ®‹å­˜ç¢ºèª**
```bash
# S3ãƒã‚±ãƒƒãƒˆã®ç¢ºèª
aws s3 ls | grep ses-migration-dev

# CloudWatch Logsã®ç¢ºèª
aws logs describe-log-groups --log-group-name-prefix "ses-migration-dev"

# Lambdaé–¢æ•°ã®ç¢ºèª
aws lambda list-functions --query 'Functions[?contains(FunctionName, `ses-migration-dev`)]'

# IAMãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¢ºèª
aws iam list-users --query 'Users[?contains(UserName, `dev`)]'

# IAMã‚°ãƒ«ãƒ¼ãƒ—ã®ç¢ºèª
aws iam list-groups --query 'Groups[?contains(GroupName, `dev`)]'
```

#### **2. ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã®å®Œäº†ç¢ºèª**
- ã™ã¹ã¦ã®devç’°å¢ƒã®ãƒªã‚½ãƒ¼ã‚¹ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹ã“ã¨
- æ®‹å­˜ã™ã‚‹ãƒªã‚½ãƒ¼ã‚¹ãŒãªã„ã“ã¨
- ã‚³ã‚¹ãƒˆãŒç™ºç”Ÿã—ã¦ã„ãªã„ã“ã¨

### **æ³¨æ„äº‹é …**

#### **1. å‰Šé™¤ã®é †åº**
- **å¿…ãšä¾å­˜é–¢ä¿‚ã®é€†é †ã§å‰Šé™¤**ã™ã‚‹ã“ã¨
- Security â†’ Monitoring â†’ SES â†’ Base ã®é †åºã‚’å®ˆã‚‹ã“ã¨
- é †åºã‚’é–“é•ãˆã‚‹ã¨ã€ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹

#### **2. ãƒ‡ãƒ¼ã‚¿ã®ä¿è­·**
- é‡è¦ãªãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã¯äº‹å‰ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–å¾—ã™ã‚‹ã“ã¨
- å‰Šé™¤å‰ã«ãƒ‡ãƒ¼ã‚¿ã®é‡è¦æ€§ã‚’ç¢ºèªã™ã‚‹ã“ã¨
- æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã“ã¨

#### **3. æ¨©é™ã®ç¢ºèª**
- CloudFormationã‚¹ã‚¿ãƒƒã‚¯ã®å‰Šé™¤æ¨©é™ãŒã‚ã‚‹ã“ã¨
- å„AWSã‚µãƒ¼ãƒ“ã‚¹ã®ãƒªã‚½ãƒ¼ã‚¹å‰Šé™¤æ¨©é™ãŒã‚ã‚‹ã“ã¨
- å¿…è¦ã«å¿œã˜ã¦ç®¡ç†è€…æ¨©é™ã§å®Ÿè¡Œã™ã‚‹ã“ã¨

### **å‰Šé™¤å®Œäº†å¾Œã®æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**

#### **1. ç’°å¢ƒã®å†æ§‹ç¯‰**
```bash
# å¿…è¦ã«å¿œã˜ã¦ã€æ–°ã—ã„è¨­å®šã§ã‚¹ã‚¿ãƒƒã‚¯ã‚’å†ä½œæˆ
uv run sceptre launch dev/base.yaml
uv run sceptre launch dev/ses.yaml
uv run sceptre launch dev/monitoring.yaml
uv run sceptre launch dev/security.yaml
```

#### **2. æœ¬ç•ªç’°å¢ƒã¸ã®ç§»è¡Œ**
- devç’°å¢ƒã§ã®æ¤œè¨¼ãŒå®Œäº†ã—ãŸã‚‰ã€æœ¬ç•ªç’°å¢ƒã§ã®ã‚¹ã‚¿ãƒƒã‚¯ä½œæˆã‚’æ¤œè¨
- æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`sceptre/config/prod/`ï¼‰ã®ç¢ºèª
- æœ¬ç•ªç’°å¢ƒã§ã®æ®µéšçš„ãªãƒ‡ãƒ—ãƒ­ã‚¤è¨ˆç”»ã®ç­–å®š

## 6. ã‚¨ãƒ©ãƒ¼å‡¦ç†ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### **4.1 æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã®é™ç•Œã¨å•é¡Œç‚¹**

#### **æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã§æ¤œå‡ºã§ãã‚‹ã‚‚ã®**

1. **YAMLæ§‹æ–‡ã‚¨ãƒ©ãƒ¼**
   - ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã®å•é¡Œ
   - ã‚³ãƒ­ãƒ³ã‚„ãƒã‚¤ãƒ•ãƒ³ã®è¨˜æ³•ãƒŸã‚¹
   - åŸºæœ¬çš„ãªYAMLå½¢å¼ã®ä¸æ­£

2. **CloudFormationãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®åŸºæœ¬æ§‹é€ **
   - `AWSTemplateFormatVersion`ã®æŒ‡å®š
   - `Parameters`ã€`Resources`ã€`Outputs`ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å­˜åœ¨
   - åŸºæœ¬çš„ãªãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—ã®æŒ‡å®š

#### **æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã§æ¤œå‡ºã§ããªã„ã‚‚ã®**

##### **1. AWSãƒªã‚½ãƒ¼ã‚¹ã®è©³ç´°æ¤œè¨¼**
```yaml
# æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã§ã¯é€šã‚‹ãŒã€å®Ÿéš›ã®ä½œæˆã§å¤±æ•—ã™ã‚‹ä¾‹
SESAdminGroup:
  Type: AWS::IAM::Group
  Properties:
    Tags:  # â† æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã§ã¯å•é¡Œãªã—
      - Key: Name
        Value: "test"
```

**å®Ÿéš›ã®ã‚¨ãƒ©ãƒ¼**: `Properties validation failed for resource SESAdminGroup with message: [#: extraneous key [Tags] is not permitted]`

##### **2. ä¾å­˜é–¢ä¿‚ã®å•é¡Œ**
```yaml
# æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã§ã¯é€šã‚‹ãŒã€å®Ÿè¡Œæ™‚ã«å¤±æ•—ã™ã‚‹ä¾‹
Resources:
  MyPolicy:
    Type: AWS::IAM::Policy
    Properties:
      Users:
        - !Ref NonExistentUser  # â† æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã§ã¯å•é¡Œãªã—
```

**å®Ÿéš›ã®ã‚¨ãƒ©ãƒ¼**: `The role with name dev-admin cannot be found`

##### **3. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä¸æ•´åˆ**
```yaml
# æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã§ã¯é€šã‚‹ãŒã€å®Ÿè¡Œæ™‚ã«å¤±æ•—ã™ã‚‹ä¾‹
Parameters:
  Environment:
    Type: String
    Default: "dev"  # â† æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã§ã¯å•é¡Œãªã—

# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå†…ã§
Conditions:
  IsProduction: !Equals [!Ref Environment, "production"]  # â† æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã§ã¯å•é¡Œãªã—
```

**å®Ÿéš›ã®ã‚¨ãƒ©ãƒ¼**: `Parameter 'Environment' must be one of AllowedValues`

### **4.2 ãªãœæ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã ã‘ã§ã¯ä¸ååˆ†ãªã®ã‹**

#### **1. AWS APIã®åˆ¶ç´„**
- CloudFormationãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ã€AWS APIã®åˆ¶ç´„ã‚’å®Ÿè¡Œæ™‚ã¾ã§æ¤œè¨¼ã§ããªã„
- ãƒªã‚½ãƒ¼ã‚¹ã®çµ„ã¿åˆã‚ã›ã‚„ä¾å­˜é–¢ä¿‚ã¯ã€å®Ÿéš›ã®AWSç’°å¢ƒã§ã®ã¿æ¤œè¨¼å¯èƒ½

#### **2. å‹•çš„ãªå€¤ã®æ¤œè¨¼**
- `!Ref`ã€`!GetAtt`ã€`!Sub`ãªã©ã®é–¢æ•°ã¯ã€å®Ÿè¡Œæ™‚ã¾ã§å®Ÿéš›ã®å€¤ã‚’å–å¾—ã§ããªã„
- æ¡ä»¶åˆ†å²ï¼ˆ`!If`ã€`!Equals`ï¼‰ã‚‚å®Ÿè¡Œæ™‚ã¾ã§è©•ä¾¡ã•ã‚Œãªã„

#### **3. ãƒªã‚½ãƒ¼ã‚¹é–“ã®é–¢ä¿‚æ€§**
- IAMãƒãƒªã‚·ãƒ¼ã¨IAMãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é–¢ä¿‚
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã¨EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®é–¢ä¿‚
- ã“ã‚Œã‚‰ã®ä¾å­˜é–¢ä¿‚ã¯å®Ÿè¡Œæ™‚ã¾ã§æ¤œè¨¼ã§ããªã„

### **4.3 æ”¹å–„æ¡ˆã¨æ®µéšçš„æ¤œè¨¼ãƒ—ãƒ­ã‚»ã‚¹**

#### **1. ã‚ˆã‚Šè©³ç´°ãªäº‹å‰æ¤œè¨¼**
```bash
# CloudFormationãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®è©³ç´°æ¤œè¨¼
aws cloudformation validate-template --template-body file://template.yaml

# Sceptreã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ¤œè¨¼
uv run sceptre validate dev/stack.yaml

# ä¾å­˜é–¢ä¿‚ã®å¾ªç’°ãƒã‚§ãƒƒã‚¯
uv run python -c "import yaml; print('Dependencies check')"
```

#### **2. æ®µéšçš„ãªæ¤œè¨¼ãƒ—ãƒ­ã‚»ã‚¹**
1. **YAMLæ§‹æ–‡ãƒã‚§ãƒƒã‚¯** â†’ åŸºæœ¬çš„ãªè¨˜æ³•ã‚¨ãƒ©ãƒ¼
2. **CloudFormationæ§‹æ–‡ãƒã‚§ãƒƒã‚¯** â†’ ãƒªã‚½ãƒ¼ã‚¹å®šç¾©ã®åŸºæœ¬æ§‹é€ 
3. **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ¤œè¨¼** â†’ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ•´åˆæ€§
4. **ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯** â†’ ã‚¹ã‚¿ãƒƒã‚¯é–“ã®ä¾å­˜é–¢ä¿‚
5. **å®Ÿéš›ã®ã‚¹ã‚¿ãƒƒã‚¯ä½œæˆ** â†’ æœ€çµ‚çš„ãªæ¤œè¨¼

#### **3. ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã®äº‹å‰å®Ÿè¡Œ**
```bash
# ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã‚¹ã‚¿ãƒƒã‚¯ã‚’ä½œæˆã—ã¦æ¤œè¨¼
uv run sceptre launch test/stack.yaml

# å•é¡ŒãŒãªã‘ã‚Œã°æœ¬ç•ªç’°å¢ƒã«é©ç”¨
uv run sceptre launch prod/stack.yaml
```

### **4.4 æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã®æ­£ã—ã„ä½ç½®ã¥ã‘**

#### **æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã¯ã€Œæœ€ä½é™ã®æ¤œè¨¼ã€**
æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã¯ä»¥ä¸‹ã®ç†ç”±ã§é™å®šçš„ã§ã™ãŒã€é‡è¦ãªå½¹å‰²ã‚’æœãŸã—ã¾ã™ï¼š

1. **æ˜ã‚‰ã‹ãªè¨˜æ³•ãƒŸã‚¹ã‚’æ—©æœŸç™ºè¦‹**
2. **åŸºæœ¬çš„ãªæ§‹é€ ã®å•é¡Œã‚’äº‹å‰ã«ç‰¹å®š**
3. **é–‹ç™ºåŠ¹ç‡ã®å‘ä¸Šï¼ˆæ˜ã‚‰ã‹ãªã‚¨ãƒ©ãƒ¼ã‚’æ¸›ã‚‰ã™ï¼‰**

#### **å®Ÿéš›ã®æ¤œè¨¼ã®é‡è¦æ€§**
1. **æ®µéšçš„ãªæ¤œè¨¼ãƒ—ãƒ­ã‚»ã‚¹**ã®æ§‹ç¯‰
2. **ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã®äº‹å‰å®Ÿè¡Œ**
3. **æœ¬ç•ªç’°å¢ƒã§ã®æœ€çµ‚ç¢ºèª**

#### **çµè«–**
æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã¯ã€Œç¬¬ä¸€æ®µéšã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã€ã¨ã—ã¦ä½ç½®ã¥ã‘ã€æ®µéšçš„ãªæ¤œè¨¼ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚æ§‹æ–‡ãƒã‚§ãƒƒã‚¯ã ã‘ã«ä¾å­˜ã™ã‚‹ã®ã§ã¯ãªãã€å®Ÿéš›ã®ã‚¹ã‚¿ãƒƒã‚¯ä½œæˆã‚’é€šã˜ãŸåŒ…æ‹¬çš„ãªæ¤œè¨¼ã‚’è¡Œã†ã“ã¨ã§ã€ã‚ˆã‚Šç¢ºå®Ÿãªã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

### **4.5 å®Ÿéš›ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ‰‹é †**

```bash
# ã‚¹ã‚¿ãƒƒã‚¯ã®çŠ¶æ³ç¢ºèª
uv run sceptre status dev/ses.yaml

# CloudFormationã‚¹ã‚¿ãƒƒã‚¯ã®ç›´æ¥ç¢ºèª
aws cloudformation describe-stacks --stack-name ses-migration-dev-ses

# ã‚¹ã‚¿ãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã®ç¢ºèª
aws cloudformation describe-stack-events --stack-name ses-migration-dev-ses
```

### 6.3 ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¨å†ä½œæˆ

```bash
# å¤±æ•—ã—ãŸã‚¹ã‚¿ãƒƒã‚¯ã®å‰Šé™¤
uv run sceptre delete dev/ses.yaml

# AWS CLIã§ã®ç›´æ¥å‰Šé™¤ï¼ˆä¾å­˜é–¢ä¿‚ã®å•é¡ŒãŒã‚ã‚‹å ´åˆï¼‰
aws cloudformation delete-stack --stack-name ses-migration-dev-ses

# ä¿®æ­£å¾Œã®å†ä½œæˆ
uv run sceptre launch dev/ses.yaml
```

## 7. çµ±åˆãƒ†ã‚¹ãƒˆã¨æœ¬ç•ªé©ç”¨

### 7.1 é–‹ç™ºç’°å¢ƒã§ã®å‹•ä½œç¢ºèª

```bash
# å…¨ã‚¹ã‚¿ãƒƒã‚¯ã®çŠ¶æ³ç¢ºèª
uv run sceptre list stacks

# å„ã‚¹ã‚¿ãƒƒã‚¯ã®è©³ç´°ç¢ºèª
uv run sceptre status dev/base.yaml
uv run sceptre status dev/ses.yaml
uv run sceptre status dev/security.yaml
uv run sceptre status dev/monitoring.yaml
```

### 7.2 æœ¬ç•ªç’°å¢ƒã¸ã®é©ç”¨æº–å‚™

```bash
# æœ¬ç•ªç’°å¢ƒã®è¨­å®šç¢ºèª
uv run sceptre dump config prod/base.yaml
uv run sceptre dump config prod/ses.yaml
```

## 8. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### 8.1 å…¨ã‚¹ã‚¿ãƒƒã‚¯æ§‹ç¯‰å¾Œã®æœ€çµ‚ç¢ºèª

```bash
# 6ã¤ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹æˆã®ç¢ºèª
echo "=== æœ¬ç•ªç’°å¢ƒã‚¹ã‚¿ãƒƒã‚¯çŠ¶æ³ ==="
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-base-prod --region ap-northeast-1 --query 'Stacks[0].StackStatus' --output text
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-ses-prod --region ap-northeast-1 --query 'Stacks[0].StackStatus' --output text
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-enhanced-kinesis-prod --region ap-northeast-1 --query 'Stacks[0].StackStatus' --output text
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-monitoring-prod --region ap-northeast-1 --query 'Stacks[0].StackStatus' --output text
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-security-prod --region ap-northeast-1 --query 'Stacks[0].StackStatus' --output text

echo "=== é–‹ç™ºç’°å¢ƒã‚¹ã‚¿ãƒƒã‚¯çŠ¶æ³ ==="
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-base-dev --region ap-northeast-1 --query 'Stacks[0].StackStatus' --output text
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-ses-dev --region ap-northeast-1 --query 'Stacks[0].StackStatus' --output text
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-enhanced-kinesis-dev --region ap-northeast-1 --query 'Stacks[0].StackStatus' --output text
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-monitoring-dev --region ap-northeast-1 --query 'Stacks[0].StackStatus' --output text
aws cloudformation describe-stacks --stack-name AWS-SES-NOT-DNS-AUTO-security-dev --region ap-northeast-1 --query 'Stacks[0].StackStatus' --output text
```

### 8.2 Production-Firstä¾å­˜é–¢ä¿‚ã®ç¢ºèª

```bash
# é–‹ç™ºç’°å¢ƒSESãŒæœ¬ç•ªEmailIdentityã«ä¾å­˜ã—ã¦ã„ã‚‹ã“ã¨ã®ç¢ºèª
aws sesv2 get-email-identity --email-identity noreply@dev.nttdocomo-ocx.com --region ap-northeast-1
aws sesv2 get-email-identity-dkim-attributes --email-identity noreply@dev.nttdocomo-ocx.com --region ap-northeast-1

# æœ¬ç•ªEmailIdentityã®ç¢ºèª
aws sesv2 get-email-identity --email-identity noreply@prod.nttdocomo-ocx.com --region ap-northeast-1
aws sesv2 get-email-identity-dkim-attributes --email-identity noreply@prod.nttdocomo-ocx.com --region ap-northeast-1
```

### 8.3 Enhanced Kinesis Data Streamã®å‹•ä½œç¢ºèª

```bash
# Data Streamã®ã‚·ãƒ£ãƒ¼ãƒ‰çŠ¶æ³ç¢ºèª
aws kinesis describe-stream --stream-name ses-event-stream-prod --region ap-northeast-1
aws kinesis describe-stream --stream-name ses-event-stream-dev --region ap-northeast-1

# Firehose Delivery Streamã®çŠ¶æ³ç¢ºèª
aws firehose describe-delivery-stream --delivery-stream-name ses-logs-delivery-stream-prod --region ap-northeast-1
aws firehose describe-delivery-stream --delivery-stream-name ses-logs-delivery-stream-dev --region ap-northeast-1

# S3ãƒã‚±ãƒƒãƒˆã¸ã®ãƒ­ã‚°ä¿å­˜ç¢ºèª
aws s3 ls s3://ses-migration-production-logs-627642418836/kinesis/ --region ap-northeast-1
aws s3 ls s3://ses-migration-development-logs-627642418836/kinesis/ --region ap-northeast-1
```

## 9. ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¨æ¨å¥¨äº‹é …

### 9.1 æ§‹ç¯‰é †åºã®éµå®ˆï¼ˆProduction-Firstï¼‰

1. **æœ¬ç•ªç’°å¢ƒã‚’æœ€åˆã«æ§‹ç¯‰**: EmailIdentityã¯æœ¬ç•ªã§ä½œæˆã—ã€é–‹ç™ºç’°å¢ƒã¯ä¾å­˜ã™ã‚‹æ§‹æˆ
2. **ã‚¹ã‚¿ãƒƒã‚¯ä½œæˆé †åº**: base â†’ ses â†’ enhanced-kinesis â†’ monitoring â†’ security
3. **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½¿ç”¨é †åº**:
   - æœ¬ç•ª: base.yaml, ses.yaml, enhanced-kinesis.yaml, monitoring.yaml, security.yaml
   - é–‹ç™º: base.yaml, ses.yaml (ses-devãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½¿ç”¨), enhanced-kinesis.yaml, monitoring.yaml, security.yaml

### 9.2 ap-northeast-1ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®çµ±ä¸€

ã™ã¹ã¦ã®AWSã‚³ãƒãƒ³ãƒ‰ã§`--region ap-northeast-1`ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã—ã€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®ä¸€è²«æ€§ã‚’ä¿ã¤

### 9.3 ä¾å­˜é–¢ä¿‚ã®ç®¡ç†

```bash
# Sceptreã§ã®ä¾å­˜é–¢ä¿‚ç¢ºèª
uv run sceptre graph dev/
uv run sceptre graph prod/

# è¨­å®šãƒ€ãƒ³ãƒ—ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç¢ºèª
uv run sceptre dump config dev/ses.yaml
uv run sceptre dump config prod/ses.yaml
```

### 9.4 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **IPåˆ¶é™ã®å®šæœŸè¦‹ç›´ã—**: 3ãƒ¶æœˆã”ã¨ã«IPã‚¢ãƒ‰ãƒ¬ã‚¹ç¯„å›²ã‚’ç¢ºèª
2. **DKIMè‡ªå‹•ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³**: 30æ—¥é–“éš”ã§ã®è‡ªå‹•ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šã®ç¢ºèª
3. **IAMã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã®å®šæœŸç›£æŸ»**: å››åŠæœŸã”ã¨ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãƒ¬ãƒ“ãƒ¥ãƒ¼

### 9.5 ç›£è¦–ã¨ã‚¢ãƒ©ãƒ¼ãƒˆã®ç¢ºèª

```bash
# CloudWatch Alarmsã®å‹•ä½œç¢ºèª
aws cloudwatch describe-alarms --alarm-names ses-migration-production-bounce-rate ses-migration-production-complaint-rate --region ap-northeast-1
aws cloudwatch describe-alarms --alarm-names ses-migration-development-bounce-rate ses-migration-development-complaint-rate --region ap-northeast-1

# SNS Topic Subscriptionã®ç¢ºèª
aws sns list-subscriptions-by-topic --topic-arn arn:aws:sns:ap-northeast-1:627642418836:ses-migration-production-alerts --region ap-northeast-1
aws sns list-subscriptions-by-topic --topic-arn arn:aws:sns:ap-northeast-1:627642418836:ses-migration-development-alerts --region ap-northeast-1
```

---

**æ³¨æ„äº‹é …**:
- æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯å®Ÿéš›ã®Sceptre 5ã‚¹ã‚¿ãƒƒã‚¯ãƒ»6ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹æˆã«åŸºã¥ã„ã¦ä½œæˆã•ã‚Œã¦ã„ã¾ã™
- Production-First EmailIdentityã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã¯ã€é–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰å‰ã«å¿…ãšæœ¬ç•ªç’°å¢ƒã®SESã‚¹ã‚¿ãƒƒã‚¯ã‚’ä½œæˆã—ã¦ãã ã•ã„
- ã™ã¹ã¦ã®ã‚³ãƒãƒ³ãƒ‰ã¯ap-northeast-1ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¦ã„ã¾ã™
- IPåˆ¶é™ã‚„DKIMãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šã¯ã€å®Ÿéš›ã®é‹ç”¨è¦ä»¶ã«åˆã‚ã›ã¦èª¿æ•´ã—ã¦ãã ã•ã„
- PowerShellç’°å¢ƒã§ã¯ã€Linuxã‚³ãƒãƒ³ãƒ‰ï¼ˆ`grep`ã€`ls`ãªã©ï¼‰ã®ä»£ã‚ã‚Šã«PowerShellã‚³ãƒãƒ³ãƒ‰ï¼ˆ`Select-String`ã€`Get-ChildItem`ãªã©ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™
- Sceptre 4.5.3ã§ã¯ã€ä¾å­˜é–¢ä¿‚ã®è¨˜è¿°æ–¹æ³•ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€å®Œå…¨ãªãƒ‘ã‚¹æŒ‡å®šãŒå¿…è¦ã§ã™

